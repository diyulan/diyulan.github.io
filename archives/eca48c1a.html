<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>《JavaScript高级程序设计》读书笔记 | Hi, 幽蓝</title><meta name="keywords" content="幽蓝, ulan, diyulan, H5, CSS3, JS, JavaScript"><meta name="author" content="幽蓝"><meta name="copyright" content="幽蓝"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="学习方法：全部内容都要看，内容能理解换下一个，无法理解上b站看解说，找不到解说上Google看文章，依然无法理解，那么抱着疑问回到书中继续往下看吧  第一章 简介1.2 JavaScript实现 完整的JavaScript实现包含：  核心（ECMAScript） 文档对象模型（DOM） 浏览器对象模型（BOM）   ECMAScript提供语言核心功能；DOM提供与网页内容交互的方法和接口；B">
<meta property="og:type" content="article">
<meta property="og:title" content="《JavaScript高级程序设计》读书笔记">
<meta property="og:url" content="https://diyulan.me/archives/eca48c1a.html">
<meta property="og:site_name" content="Hi, 幽蓝">
<meta property="og:description" content="学习方法：全部内容都要看，内容能理解换下一个，无法理解上b站看解说，找不到解说上Google看文章，依然无法理解，那么抱着疑问回到书中继续往下看吧  第一章 简介1.2 JavaScript实现 完整的JavaScript实现包含：  核心（ECMAScript） 文档对象模型（DOM） 浏览器对象模型（BOM）   ECMAScript提供语言核心功能；DOM提供与网页内容交互的方法和接口；B">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://diyulan.me/img/cover_jsNotes.webp">
<meta property="article:published_time" content="2022-04-15T03:46:07.000Z">
<meta property="article:modified_time" content="2022-05-24T15:55:21.506Z">
<meta property="article:author" content="幽蓝">
<meta property="article:tag" content="幽蓝, ulan, diyulan, H5, CSS3, JS, JavaScript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://diyulan.me/img/cover_jsNotes.webp"><link rel="shortcut icon" href="/img/index_logo.webp"><link rel="canonical" href="https://diyulan.me/archives/eca48c1a"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '《JavaScript高级程序设计》读书笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-05-24 23:55:21'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 6.1.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/index_avatar.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">12</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa-solid fa-mug-saucer"></i><span> 项目</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/284b2c05.html"><span> free练习题</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/cover_jsNotes.webp')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Hi, 幽蓝</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa-solid fa-mug-saucer"></i><span> 项目</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/284b2c05.html"><span> free练习题</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">《JavaScript高级程序设计》读书笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-04-15T03:46:07.000Z" title="发表于 2022-04-15 11:46:07">2022-04-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-05-24T15:55:21.506Z" title="更新于 2022-05-24 23:55:21">2022-05-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">20.2k</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="《JavaScript高级程序设计》读书笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><blockquote>
<p>学习方法：全部内容都要看，内容能理解换下一个，无法理解上b站看解说，找不到解说上Google看文章，依然无法理解，那么抱着疑问回到书中继续往下看吧</p>
</blockquote>
<h2 id="第一章-简介"><a href="#第一章-简介" class="headerlink" title="第一章 简介"></a>第一章 简介</h2><h3 id="1-2-JavaScript实现"><a href="#1-2-JavaScript实现" class="headerlink" title="1.2 JavaScript实现"></a>1.2 JavaScript实现</h3><ol>
<li>完整的JavaScript实现包含： <ul>
<li>核心（ECMAScript）</li>
<li>文档对象模型（DOM）</li>
<li>浏览器对象模型（BOM）</li>
</ul>
</li>
<li>ECMAScript提供语言核心功能；DOM提供与网页内容交互的方法和接口；BOM提供与浏览器交互的方法和接口</li>
</ol>
<h2 id="第二章-HTML中的JavaScript"><a href="#第二章-HTML中的JavaScript" class="headerlink" title="第二章 HTML中的JavaScript"></a>第二章 HTML中的JavaScript</h2><h3 id="2-1-Script元素"><a href="#2-1-Script元素" class="headerlink" title="2.1 Script元素"></a>2.1 Script元素</h3><ol>
<li><p>标签位置：为了避免加载JS文件导致页面空白，现代Web应用程序通常将所有JS引用放在<body>元素中的页面内容后面</p>
</li>
<li><p>延迟脚本：defer属性脚本在执行时不会影响页面加载，脚本会被延迟到整个页面都解析完毕后再运行；延迟脚本不一定总会按顺序执行，因此最好只包含一个脚本</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script defer src=<span class="string">&quot;example1.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>异步脚本：async属性脚本同样不会影响页面加载，脚本下载完不管页面是否解析完直接运行；同样不一定会按顺序执行，异步脚本不建议修改DOM，可能会出现BUG，它和延迟都是外部脚本</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script <span class="keyword">async</span> src=<span class="string">&quot;example1.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">&quot;example2.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="2-3-文档模式"><a href="#2-3-文档模式" class="headerlink" title="2.3 文档模式"></a>2.3 文档模式</h3><ol>
<li><p>最初的文档模式：</p>
<ul>
<li>混杂模式(quirks mode)</li>
<li>标准模式(standards mode)</li>
</ul>
</li>
<li><p>标准模式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- HTML5 --&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="第三章-语言基础"><a href="#第三章-语言基础" class="headerlink" title="第三章 语言基础"></a>第三章 语言基础</h2><h3 id="3-1-语法"><a href="#3-1-语法" class="headerlink" title="3.1 语法"></a>3.1 语法</h3><ol>
<li>区分大小写：ECMAScript中一切都区分大小写，变量test和变量Test是两个不同的变量</li>
<li>ECMAScript标识符使用驼峰大小写形式：firstSecond</li>
<li>严格模式：在严格模式下，ECMAScript3的一些不规范写法在这种模式下会被处理，对于不安全的活动将抛出错误；顶部加上这一行启用严格模式：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-3-变量"><a href="#3-3-变量" class="headerlink" title="3.3 变量"></a>3.3 变量</h3><ol start="4">
<li>严格模式下，如果像这样给未声明的变量赋值，则会导致抛出ReferenceError</li>
<li>不使用var，const优先，let次之；使用const声明保持常量，不合理的赋值操作会报错，只在未来有修改再使用let</li>
</ol>
<h3 id="3-4-数据类型"><a href="#3-4-数据类型" class="headerlink" title="3.4 数据类型"></a>3.4 数据类型</h3><ol start="6">
<li>简单数据类型：Undefined、Null、Boolean、Number、String、Symbol；复杂数据类型：Object</li>
<li>typeof操作符，用来检测变量数据类型<ul>
<li>Undefined类型：当使用var或let声明了变量但没有初始化时，相当于给变量赋予了undefined</li>
<li>Null类型：null值表示一个空对象指针；只要变量要保存对象，而当时又没有那个对象可保存，就要用null来填充该变量</li>
<li>Boolean类型：其他类型的值转换为布尔值，可以调用特定的Boolean()转型函数</li>
<li>Number类型：其他类型的值转换为数值，常用parseInt()函数；如果第一个字符不是数值字符、加号或减号返回NaN，第二个参数用来指定进制数</li>
<li>String类型：字符串是不可变的；其他类型的值转换为字符串，使用函数toString()或String()</li>
<li>Symbol类型：符号实例是唯一、不可变的；创建Symbol()实例并将其用作对象的新属性，就可以保证它不会覆盖已有的对象属性，无论是符号属性还是字符串属性<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义Symbol永远都不会一样</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="title class_">Symbol</span>(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> b = <span class="title class_">Symbol</span>(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a === b);   <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="property">description</span>);   <span class="comment">// hello</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果声明过&#x27;hi&#x27;，系统会拿过来用所以为true</span></span><br><span class="line"><span class="keyword">let</span> c = <span class="title class_">Symbol</span>.<span class="title function_">for</span>(<span class="string">&#x27;hi&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> d = <span class="title class_">Symbol</span>.<span class="title function_">for</span>(<span class="string">&#x27;hi&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c === d);   <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Symbol</span>.<span class="title function_">keyFor</span>(c));    <span class="comment">// hi</span></span><br><span class="line">   </span><br><span class="line"><span class="comment">// 同名查询成绩应用场景</span></span><br><span class="line"><span class="keyword">let</span> user1 = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;幽蓝&#x27;</span>,</span><br><span class="line">  <span class="attr">key</span>: <span class="title class_">Symbol</span>()</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> user2 = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;幽蓝&#x27;</span>,</span><br><span class="line">  <span class="attr">key</span>: <span class="title class_">Symbol</span>()</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> grade = &#123;</span><br><span class="line">  [user1.<span class="property">key</span>]: &#123;<span class="attr">css</span>: <span class="number">100</span>, <span class="attr">js</span>: <span class="number">89</span>&#125;,</span><br><span class="line">  [user2.<span class="property">key</span>]: &#123;<span class="attr">css</span>: <span class="number">57</span>, <span class="attr">js</span>: <span class="number">32</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(grade);</span><br></pre></td></tr></table></figure></li>
<li>Object类型</li>
</ul>
</li>
</ol>
<p>创建对象的方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br></pre></td></tr></table></figure>

<p>Object实例都有如下属性和方法：</p>
<ul>
<li>constructor: 用于创建当前对象的函数</li>
<li>hasOwnProperty(propertyName): 用于判断当前对象实例(不是原型)上是否存在给定的属性</li>
<li>isPrototypeOf(object): 用于判断当前对象是否为另一个对象的原型</li>
<li>propertyIsEnumerable(propertyName): 用于判断给定的属性是否可以使用for-in语句枚举</li>
<li>toLocaleString(): 返回对象的字符串表示，该字符串反映对象所在的本地化执行环境</li>
<li>toString(): 返回对象的字符串表示</li>
<li>valueOf(): 返回对象对应的字符串、数值或布尔值表示</li>
</ul>
<h3 id="3-5-操作符"><a href="#3-5-操作符" class="headerlink" title="3.5 操作符"></a>3.5 操作符</h3><ol start="8">
<li><p>ECMAScript7新增指数操作符</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span> ** <span class="number">2</span>);      <span class="comment">// 3*3 = 9</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span> ** <span class="number">3</span>);      <span class="comment">// 3*3*3 = 27</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">16</span> ** <span class="number">0.5</span>);   <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>字符串和字符串比较时，它们比较的是字符编码，所以看起来会很怪</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;23&#x27;</span> &lt; <span class="string">&#x27;3&#x27;</span>);    <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>数值和字符串比较时，字符串会先被转换为数值，这样能保证结果正确；如果不能转换成数值，就转换成NaN</p>
</li>
<li><p>任何操作数与NaN比较时，结果都会返回false</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">NaN</span> == <span class="title class_">NaN</span>);      <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">NaN</span> === <span class="title class_">NaN</span>);     <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">NaN</span> &gt; <span class="title class_">NaN</span>);       <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">NaN</span> &lt; <span class="title class_">NaN</span>);       <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>相等（&#x3D;&#x3D;）全等（&#x3D;&#x3D;&#x3D;），相等比较时会转换数据类型，而全等不会转换数据类型直接比较</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;55&#x27;</span> == <span class="number">55</span>);      <span class="comment">// true，转换后相等</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;55&#x27;</span> === <span class="number">55</span>);     <span class="comment">// false，不相等，因为数据类型不一样</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>条件操作符</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">variable = boolean_expression ? true_value : false_value;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果100大于50，则将&#x27;答对了&#x27;赋值给faqNumber，否则将&#x27;答错了&#x27;赋值给faqNumber</span></span><br><span class="line"><span class="keyword">let</span> faqNumber = (<span class="number">100</span> &gt; <span class="number">50</span>) ? <span class="string">&#x27;答对了&#x27;</span>:<span class="string">&#x27;答错了&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(faqNumber);   <span class="comment">// 答对了</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-6-语句"><a href="#3-6-语句" class="headerlink" title="3.6 语句"></a>3.6 语句</h3><ol start="14">
<li><p>for-in语句：用于枚举对象中的非符号键属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (property <span class="keyword">in</span> expression) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>for-of语句：用于遍历可迭代对象的元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (property <span class="keyword">of</span> expression) &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>break和continue都可以与label语句一起使用;通常是在嵌套循环中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">0</span>;</span><br><span class="line"><span class="attr">outermost</span>:</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">10</span>; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (i == <span class="number">5</span> &amp;&amp; j == <span class="number">5</span>) &#123;</span><br><span class="line">        <span class="keyword">break</span> outermost;</span><br><span class="line">      &#125;</span><br><span class="line">      num++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num);   <span class="comment">// 55</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-7-函数"><a href="#3-7-函数" class="headerlink" title="3.7 函数"></a>3.7 函数</h3><ol start="17">
<li>函数参数：参数在内部是用一个数组来表示的，函数接收到的始终都是这个数组，而不关心数组中包含哪些函数；通过arguments对象来访问这个参数数组；命名的参数只提供便利，但不是必须的；arguments对象中的值与对应的命名参数的内存空间是独立的，但它们的值会同步<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">example</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;arguments&#x27;</span>, <span class="variable language_">arguments</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;name:&#x27;</span>, name, <span class="string">&#x27;age:&#x27;</span>, age);</span><br><span class="line">  name = <span class="string">&#x27;幽蓝&#x27;</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>[<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">example</span>(<span class="string">&#x27;金涛&#x27;</span>, <span class="string">&#x27;20&#x27;</span>, <span class="string">&#x27;myFriend&#x27;</span>);</span><br><span class="line"><span class="comment">// arguments: [&#x27;金涛&#x27;, &#x27;20&#x27;, &#x27;myFriend&#x27;]</span></span><br><span class="line"><span class="comment">// name: 金涛 age: 20</span></span><br><span class="line"><span class="comment">// 幽蓝</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="第四章-变量、作用域与内存"><a href="#第四章-变量、作用域与内存" class="headerlink" title="第四章 变量、作用域与内存"></a>第四章 变量、作用域与内存</h2><h3 id="4-1-原始值与引用值"><a href="#4-1-原始值与引用值" class="headerlink" title="4.1 原始值与引用值"></a>4.1 原始值与引用值</h3><ol>
<li><p>在操作对象时，实际上操作的是对象的引用而不是对象的本身</p>
</li>
<li><p>从一个变量到另一个变量复制基本类型值时，会创建这个值的副本；从一个变量到另一个变量复制引用类型值时，复制的值实际上是一个指针，它指向存储在堆内存中的对象，复制之后两个变量指向同一个对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> n1 = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> n2 = n1;</span><br><span class="line">n1 = <span class="number">2</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(n2);        <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> o1 = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> o2 = o1;</span><br><span class="line">o1.<span class="property">name</span> = <span class="string">&#x27;幽蓝&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(o2.<span class="property">name</span>);   <span class="comment">// 幽蓝</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>传递参数：参数只能按值传递，参数为对象时，在函数内部访问的是同一个对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">setName</span>(<span class="params">o</span>)&#123;</span><br><span class="line">  o.<span class="property">name</span> = <span class="string">&#x27;幽蓝&#x27;</span>;</span><br><span class="line">  o = &#123;&#125;;</span><br><span class="line">  o.<span class="property">name</span> = <span class="string">&#x27;金涛&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p = &#123;&#125;;</span><br><span class="line"><span class="title function_">setName</span>(p);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">name</span>);    <span class="comment">// 幽蓝</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>确定一个值是哪种基本类型可以使用typeof操作符，而确定一个值是哪种引用类型可以使用instanceof操作符</p>
</li>
</ol>
<h3 id="4-2-执行上下文与作用域"><a href="#4-2-执行上下文与作用域" class="headerlink" title="4.2 执行上下文与作用域"></a>4.2 执行上下文与作用域</h3><ol start="5">
<li>执行上下文（也称为作用域）分全局上下文、函数上下文和块级上下文；每个上下文都有一个关联的变量对象；上下文中的代码在执行的时候，会创建变量对象的一个作用域链；作用域链的最前端始终是正在执行上下文的变量对象，全局上下文的变量对象是作用域链的最后一个变量对象</li>
<li>标识符查找：从作用域链的最前端开始，向上逐级搜索，找到后搜索停止，没有找到则一直追溯到全局上下文的变量对象</li>
</ol>
<h3 id="4-3-垃圾回收"><a href="#4-3-垃圾回收" class="headerlink" title="4.3 垃圾回收"></a>4.3 垃圾回收</h3><ol start="7">
<li>最常用的垃圾回收策略是标记清理，垃圾回收程序运行的时候，会标记内存中存储的所有变量，然后去掉上下文中的变量以及被上下文中的变量引用的变量标记，之后再被加上标记的变量就是待删除的，原因是这些变量无法被访问到了</li>
<li>优化内存占用：执行代码时只保存必要的数据，如果数据不再必要，那么把它设置为null，从而释放其引用——解除引用；解除引用的作用是让其脱离上下文，以便垃圾回收程序运行时将其回收</li>
</ol>
<h2 id="第五章-基本引用类型"><a href="#第五章-基本引用类型" class="headerlink" title="第五章 基本引用类型"></a>第五章 基本引用类型</h2><h3 id="5-1-Date"><a href="#5-1-Date" class="headerlink" title="5.1 Date"></a>5.1 Date</h3><ol>
<li><p>创建日期对象：月份从0开始(1月是0，2月是1…)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> d1 = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="keyword">let</span> d2 = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">2022</span>, <span class="number">3</span>, <span class="number">20</span>, <span class="number">7</span>, <span class="number">30</span>, <span class="number">30</span>);    <span class="comment">// 2022年4月20日7点30分30秒</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>获取执行时日期和时间的毫秒数，用来分析代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 起始时间</span></span><br><span class="line"><span class="keyword">let</span> start = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数</span></span><br><span class="line"><span class="title function_">doSomething</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结束时间</span></span><br><span class="line"><span class="keyword">let</span> stop = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">result = stop - start;</span><br></pre></td></tr></table></figure>
</li>
<li><p>日期格式化方法：local表示以特定于地区的格式显示</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> d2 = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">2022</span>, <span class="number">3</span>, <span class="number">20</span>, <span class="number">7</span>, <span class="number">30</span>, <span class="number">30</span>);    <span class="comment">// 2022年4月20日7点30分30秒</span></span><br><span class="line">d2.<span class="title function_">toString</span>();              <span class="comment">// Wed Apr 20 2022 07:30:30 GMT+0800 (中国标准时间)</span></span><br><span class="line">d2.<span class="title function_">toDateString</span>();          <span class="comment">// Wed Apr 20 2022</span></span><br><span class="line">d2.<span class="title function_">toTimeString</span>();          <span class="comment">// 07:30:30 GMT+0800 (中国标准时间)</span></span><br><span class="line">d2.<span class="title function_">toLocaleString</span>();        <span class="comment">// 2022/4/20 07:30:30</span></span><br><span class="line">d2.<span class="title function_">toLocaleDateString</span>();    <span class="comment">// 2022/4/20</span></span><br><span class="line">d2.<span class="title function_">toLocaleTimeString</span>();    <span class="comment">// 07:30:30</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="5-2-RegExp"><a href="#5-2-RegExp" class="headerlink" title="5.2 RegExp"></a>5.2 RegExp</h3><ol start="4">
<li><p>pattern是正则表达式；flags是标记，用于控制正则表达式的行为。下面表示匹配模式的标记：</p>
<ul>
<li>g：全局模式，表示查找字符串的全部内容，而不是找到第一个匹配的内容就结束</li>
<li>i：不区分大小写，表示在查找匹配时忽略pattern和字符串的大小写</li>
<li>m：多行模式，表示查找到一行文本末尾时会继续查找</li>
<li>y：粘附模式，表示只查找从lastIndex开始及之后的字符串</li>
<li>u：Unicode模式，启用Unicode匹配</li>
<li>s：dotAll模式，表示元字符.匹配任何字符(包括\n或\r)<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> exp1 = <span class="regexp">/ pattern /</span> flags;</span><br><span class="line"><span class="keyword">let</span> exp2 = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;pattern&#x27;</span>, <span class="string">&#x27;flags&#x27;</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>实例方法：</p>
<ul>
<li>exec()：返回包含第一个匹配信息的数组，数组第一个元素是匹配整个模式的字符串，其他元素是与表达式中的捕获组匹配的字符串；包含两个额外的属性:index和input <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> text = <span class="string">&quot;I&#x27;m ulan, and this is newHome&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> pattern = <span class="regexp">/and( this( is)?)?/gi</span>;</span><br><span class="line"><span class="keyword">let</span> matches = pattern.<span class="title function_">exec</span>(text);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(matches.<span class="property">index</span>);   <span class="comment">// 10</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(matches.<span class="property">input</span>);   <span class="comment">// I&#x27;m ulan, and this is newHome</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(matches[<span class="number">0</span>]);      <span class="comment">// and this is</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(matches[<span class="number">1</span>]);      <span class="comment">// this is</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(matches[<span class="number">2</span>]);      <span class="comment">// is</span></span><br></pre></td></tr></table></figure></li>
<li>test：输入的文本与模式匹配，则返回true，否则返回false <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> text = <span class="string">&quot;I&#x27;m ulan, and this is newHome&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> pattern = <span class="regexp">/ulan/</span>;</span><br><span class="line"><span class="keyword">let</span> matches = pattern.<span class="title function_">test</span>(text);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(matches);     <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>RegExp构造函数有部分属性，适用于作用域中的所有正则表达式，这些属性可以提取出与exec()和test()执行的操作相关的信息</p>
</li>
</ol>
<h3 id="5-3-原始值包装类型"><a href="#5-3-原始值包装类型" class="headerlink" title="5.3 原始值包装类型"></a>5.3 原始值包装类型</h3><ol start="7">
<li><p>三种特殊的引用类型：Boolean、Number、String</p>
</li>
<li><p>Number的方法</p>
<ul>
<li>toString()：数值转字符串，参数可接收二、八进制…</li>
<li>toFixed()：数值转字符串，参数指定包含小数点位数</li>
<li>isInteger()：用来判断数值是否保存为整数<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> n1 = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> n2 = <span class="number">10.005</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(n1.<span class="title function_">toString</span>());                <span class="comment">// &quot;10&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(n2.<span class="title function_">toFixed</span>(<span class="number">2</span>));                <span class="comment">// &quot;10.01&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>.<span class="title function_">isInteger</span>(n1));         <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>.<span class="title function_">isInteger</span>(n2));         <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>String的方法</p>
<ul>
<li>length属性：表示字符串的长度</li>
<li>charAt()：查找索引位置返回字符，从索引0开始找，参数由整数指定位置<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s1 = <span class="string">&#x27;hello world&#x27;</span>;</span><br><span class="line">s1.<span class="property">length</span>       <span class="comment">// 11</span></span><br><span class="line">s1.<span class="title function_">charAt</span>(<span class="number">6</span>)    <span class="comment">// &#x27;w&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>slice()：提取子字符串，第一个参数表示开始搜索的位置，第二个参数表示结束搜索的位置，负数从末尾计算</li>
<li>substr()：提取子字符串，第一个参数表示开始搜索的位置，第二个参数是以length提取，按1、2、3…个字符计算<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s2 = <span class="string">&#x27;我喜欢JS，同时也爱HTML&#x27;</span>;</span><br><span class="line">s2.<span class="title function_">slice</span>(<span class="number">3</span>, <span class="number">5</span>)        <span class="comment">// &#x27;JS&#x27;</span></span><br><span class="line">s2.<span class="title function_">slice</span>(-<span class="number">4</span>, -<span class="number">1</span>)      <span class="comment">// &#x27;HTM&#x27;</span></span><br><span class="line">s2.<span class="title function_">substr</span>(<span class="number">3</span>, <span class="number">2</span>)       <span class="comment">// &#x27;JS&#x27;</span></span><br><span class="line">s2.<span class="title function_">substr</span>(-<span class="number">4</span>, <span class="number">4</span>)      <span class="comment">// &#x27;HTML&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>indexOf()：查找字符索引返回位置，从前往后找，没找到返回-1</li>
<li>lastIndexOf()：查找字符索引返回位置，从后往前找，没找到返回-1</li>
<li>includes()：判断字符串中是否包含另一个字符串，第二个参数表示指定位置向末尾搜索<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s3 = <span class="string">&#x27;abcdabcd&#x27;</span>;</span><br><span class="line">s3.<span class="title function_">indexOf</span>(<span class="string">&#x27;a&#x27;</span>)             <span class="comment">// 0</span></span><br><span class="line">s3.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;a&#x27;</span>)         <span class="comment">// 4</span></span><br><span class="line">s3.<span class="title function_">indexOf</span>(<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>)          <span class="comment">// 4</span></span><br><span class="line">s3.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>)      <span class="comment">// 0</span></span><br><span class="line">s3.<span class="title function_">includes</span>(<span class="string">&#x27;ab&#x27;</span>)           <span class="comment">// true</span></span><br><span class="line">s3.<span class="title function_">includes</span>(<span class="string">&#x27;df&#x27;</span>)           <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li>
<li>trim()：创建字符串的副本，删除前后所有空格<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s4 = <span class="string">&#x27;  hello world  &#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> s5 = s4.<span class="title function_">trim</span>();   <span class="comment">// &#x27;hello world&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>repeat()：字符串复制多少次，返回拼接后的副本，参数为复制次数<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;hello &#x27;</span>.<span class="title function_">repeat</span>(<span class="number">3</span>) + <span class="string">&#x27;world&#x27;</span>    <span class="comment">// &#x27;hello hello hello world&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>toUpperCase()和toLowerCase()：英文字符串转换大写和小写<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s6 = <span class="string">&#x27;hello world&#x27;</span>, s7 = <span class="string">&#x27;HELLO WORLD&#x27;</span>;</span><br><span class="line">s6.<span class="title function_">toUpperCase</span>()    <span class="comment">// &#x27;HELLO WORLD&#x27;</span></span><br><span class="line">s7.<span class="title function_">toLowerCase</span>()    <span class="comment">// &#x27;hello world&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>localeCompare()：按字母表顺序比较两个字符串，返回比较结果；例如a在b前面，b在c前面<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s8 = <span class="string">&#x27;betty&#x27;</span>;</span><br><span class="line">s8.<span class="title function_">localeCompare</span>(<span class="string">&#x27;alice&#x27;</span>)    <span class="comment">// 1</span></span><br><span class="line">s8.<span class="title function_">localeCompare</span>(<span class="string">&#x27;betty&#x27;</span>)    <span class="comment">// 0</span></span><br><span class="line">s8.<span class="title function_">localeCompare</span>(<span class="string">&#x27;claier&#x27;</span>)   <span class="comment">// -1</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h3 id="5-4-单例内置对象"><a href="#5-4-单例内置对象" class="headerlink" title="5.4 单例内置对象"></a>5.4 单例内置对象</h3><ol start="10">
<li>Global对象为一种兜底对象，不属于任何对象的属性和方法都是Global对象的方法，例如：isNaN()、parseInt()等；window对象是Global对象的代理，全局作用域中声明的变量和函数都变成了window的属性</li>
<li>Math对象提供一些计算的属性和方法<ul>
<li>min()、max()：确定一组数值中的最小值和最大值，可接收任意多个参数</li>
<li>Math.ceil()、Math.floor()、Math.round()、 Math.fround()：小数值舍入为整数</li>
<li>random()：返回随机数<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">min</span>(...arr));   <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">max</span>(...arr));   <span class="comment">// 8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> num = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">10</span> + <span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num);   <span class="comment">// 随机1～10</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h2 id="第六章-集合引用类型"><a href="#第六章-集合引用类型" class="headerlink" title="第六章 集合引用类型"></a>第六章 集合引用类型</h2><h3 id="6-1-Object"><a href="#6-1-Object" class="headerlink" title="6.1 Object"></a>6.1 Object</h3><ol>
<li><p>创建Object实例：使用Object构造函数；对象字面量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// new操作符法</span></span><br><span class="line"><span class="keyword">let</span> o1 = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">o1.<span class="property">name</span> = <span class="string">&#x27;幽蓝&#x27;</span>;</span><br><span class="line">o1.<span class="property">age</span> = <span class="number">9</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象字面量表示法</span></span><br><span class="line"><span class="keyword">let</span> o2 = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;幽蓝&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">9</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>访问对象属性：点表示法；方括号表示法；建议使用点表示法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点表示法</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(o.<span class="property">name</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方括号表示法</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(o[<span class="string">&#x27;name&#x27;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> n = <span class="string">&#x27;name&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(o[n]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(o[<span class="string">&#x27;first name&#x27;</span>])</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="6-2-Array"><a href="#6-2-Array" class="headerlink" title="6.2 Array"></a>6.2 Array</h3><ol start="3">
<li><p>创建数组：使用Array构造函数；使用数组字面量表示法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a1 = <span class="keyword">new</span> <span class="title class_">Array</span>();</span><br><span class="line"><span class="keyword">let</span> a2 = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">20</span>);</span><br><span class="line"><span class="keyword">let</span> a3 = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a4 = [];</span><br><span class="line"><span class="keyword">let</span> a5 = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>];</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建数组静态方法</p>
<ul>
<li>from()：可以将类数组结构转换为数组实例<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 字符串拆分单字符数组</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="string">&#x27;ulan&#x27;</span>));    <span class="comment">// [ &#x27;u&#x27;, &#x27;l&#x27;, &#x27;a&#x27;, &#x27;n&#x27; ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组浅复制</span></span><br><span class="line"><span class="keyword">const</span> a1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> a2 = <span class="title class_">Array</span>.<span class="title function_">from</span>(a1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a1 === a2);     <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 任何可迭代对象</span></span><br><span class="line"><span class="keyword">const</span> iter = &#123;</span><br><span class="line">  * [<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">4</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(iter));    <span class="comment">// [ 1, 2, 3, 4 ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 集合和映射转换为新数组</span></span><br><span class="line"><span class="keyword">const</span> m = <span class="keyword">new</span> <span class="title class_">Map</span>() .<span class="title function_">set</span>(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">                    .<span class="title function_">set</span>(<span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="title class_">Set</span>() .<span class="title function_">add</span>(<span class="number">1</span>)</span><br><span class="line">                    .<span class="title function_">add</span>(<span class="number">2</span>)</span><br><span class="line">                    .<span class="title function_">add</span>(<span class="number">3</span>)</span><br><span class="line">                    .<span class="title function_">add</span>(<span class="number">4</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(m));     <span class="comment">// [[1, 2], [3, 4]]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(s));     <span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// arguments对象可以被轻松地转换为数组</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="variable language_">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">f1</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>));   <span class="comment">// [ 1, 2, 3, 4 ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 转换带有必要属性的自定义对象</span></span><br><span class="line"><span class="keyword">const</span> o1 = &#123;</span><br><span class="line">  <span class="number">0</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="number">1</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="number">2</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="number">3</span>: <span class="number">4</span>,</span><br><span class="line">  <span class="attr">length</span>: <span class="number">4</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(o1));    <span class="comment">// [ 1, 2, 3, 4 ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二个参数可以映射函数，直接增强新数组的值</span></span><br><span class="line"><span class="comment">// 第三个参数指定映射函数this的值，重写this值在箭头函数中不适用</span></span><br><span class="line"><span class="keyword">const</span> a1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> a2 = <span class="title class_">Array</span>.<span class="title function_">from</span>(a1, <span class="function"><span class="params">x</span> =&gt;</span> x ** <span class="number">2</span>);</span><br><span class="line"><span class="keyword">const</span> a3 = <span class="title class_">Array</span>.<span class="title function_">from</span>(a1, <span class="keyword">function</span> (<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x ** <span class="variable language_">this</span>.<span class="property">e</span></span><br><span class="line">&#125;, &#123;<span class="attr">e</span>: <span class="number">2</span>&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a2);    <span class="comment">// [ 1, 4, 9, 16 ]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a3);    <span class="comment">// [ 1, 4, 9, 16 ]</span></span><br></pre></td></tr></table></figure></li>
<li>of()：可以将一组参数转换为数组实例<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// arguments对象转换为数组</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">of</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>));       <span class="comment">// [ 1, 2, 3, 4 ]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">of</span>(<span class="literal">undefined</span>));     <span class="comment">// [ undefined ]</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>数组空位：一串空号来创建空位[,,,]；尽量避免使用空位，有需要可用undefined代替</p>
</li>
<li><p>数组索引：利用length在末尾添加新项</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>];</span><br><span class="line">a[a.<span class="property">length</span>] = <span class="string">&#x27;c&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>检测数组：Array.isArray()（解决了存在两个以上全局执行环境时instanceof检测结果出错的情况）</p>
</li>
<li><p>迭代器方法</p>
<ul>
<li>keys()：返回数组索引</li>
<li>values()：返回数组元素</li>
<li>entries()：返回索引&#x2F;值对<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="keyword">const</span> aEntries = <span class="title class_">Array</span>.<span class="title function_">from</span>(a.<span class="title function_">entries</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(aEntries);        <span class="comment">// [ [ 0, &#x27;a&#x27; ], [ 1, &#x27;b&#x27; ], [ 2, &#x27;c&#x27; ] ]</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>复制和填充方法</p>
<ul>
<li>fill()：填充数组，向已有的数组插入全部或部分相同的值</li>
<li>copyWithin()：批量复制，按指定范围浅复制数组中的内容，插入到指定索引开始位置<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用7填充，索引大于等于1，且索引小于3的元素</span></span><br><span class="line"><span class="keyword">const</span> z = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>];</span><br><span class="line">z.<span class="title function_">fill</span>(<span class="number">7</span>, <span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(z);     <span class="comment">// [ 0, 7, 7, 0, 0 ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 从i中复制索引0开始到索引3（不包括3）结束的内容</span></span><br><span class="line"><span class="comment">// 插入到索引4开始的位置</span></span><br><span class="line"><span class="keyword">let</span> i,</span><br><span class="line">  reset = <span class="function">() =&gt;</span> i = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line"><span class="title function_">reset</span>();</span><br><span class="line">i.<span class="title function_">copyWithin</span>(<span class="number">4</span>, <span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i);   <span class="comment">// [0, 1, 2, 3, 0, 1, 2, 7, 8, 9]</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>转换方法</p>
<ul>
<li>toString()：返回一个逗号分隔的字符串</li>
<li>valueOf()：返回数组本身</li>
<li>join()：类似toString()，能把逗号换成其他</li>
</ul>
</li>
<li><p>栈方法和队列方法</p>
<ul>
<li>push()：添加一项到数组末尾</li>
<li>pop()：移除数组末尾一项</li>
<li>shift()：移除数组第一项</li>
<li>unshift()：添加一项到数组前端</li>
</ul>
</li>
<li><p>排序方法</p>
<ul>
<li>reverse()：数组元素反向排列</li>
<li>sort()：默认将数组元素转换成字符串，然后升序排列，可以接收一个比较函数作为参数</li>
</ul>
</li>
<li><p>操作方法</p>
<ul>
<li>concat()：添加项<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a1 = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> a2 = a1.<span class="title function_">concat</span>(<span class="string">&#x27;yellow&#x27;</span>, [<span class="string">&#x27;black&#x27;</span>, <span class="string">&#x27;brown&#x27;</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a2)  <span class="comment">// [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, &quot;yellow&quot;, &quot;black&quot;, &quot;brown&quot;]</span></span><br></pre></td></tr></table></figure></li>
<li>slice()：截取<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;yellow&quot;</span>, <span class="string">&quot;black&quot;</span>, <span class="string">&quot;brown&quot;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">slice</span>(<span class="number">1</span>), a.<span class="title function_">slice</span>(<span class="number">1</span>, <span class="number">4</span>))  <span class="comment">// [&quot;green&quot;, &quot;blue&quot;, &quot;yellow&quot;, &quot;black&quot;, &quot;brown&quot;] [&quot;green&quot;, &quot;blue&quot;, &quot;yellow&quot;]</span></span><br></pre></td></tr></table></figure></li>
<li>splice()：删除插入替换<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;yellow&quot;</span>, <span class="string">&quot;black&quot;</span>, <span class="string">&quot;brown&quot;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">splice</span>(<span class="number">2</span>, <span class="number">1</span>), a);  <span class="comment">// 删除项; [&quot;blue&quot;] [&quot;red&quot;, &quot;green&quot;, &quot;yellow&quot;, &quot;black&quot;, &quot;brown&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">splice</span>(<span class="number">1</span>, <span class="number">0</span>, <span class="string">&#x27;yellow&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>), a);  <span class="comment">// 插入项; [] [&quot;red&quot;, &quot;yellow&quot;, &quot;orange&quot;, &quot;green&quot;, &quot;yellow&quot;, &quot;black&quot;, &quot;brown&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">splice</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;purple&#x27;</span>), a);  <span class="comment">// 替换项; [&quot;yellow&quot;] [&quot;red&quot;, &quot;red&quot;, &quot;purple&quot;, &quot;orange&quot;, &quot;green&quot;, &quot;yellow&quot;, &quot;black&quot;, &quot;brown&quot;]</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>indexOf() lastIndexOf() 接收两个参数：要查找的项和（可选）查找起点位置的索引；indexOf()从前往后查找，lastIndexOf()从后往前查找；返回要查找的项的位置，没找到则返回-1</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;purple&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;red&quot;</span>, <span class="string">&quot;yellow&quot;</span>, <span class="string">&quot;black&quot;</span>, <span class="string">&quot;brown&quot;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">indexOf</span>(<span class="string">&#x27;red&#x27;</span>));  <span class="comment">// 0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;red&#x27;</span>));  <span class="comment">// 4</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">indexOf</span>(<span class="string">&#x27;red&#x27;</span>, <span class="number">1</span>));  <span class="comment">// 4</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;red&#x27;</span>, <span class="number">1</span>));  <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>迭代方法</p>
<ul>
<li>every()：每一项函数都返回true，则这个方法返回true</li>
<li>some()：有一项函数返回true，则这个方法返回true</li>
<li>filter()：每一项都运行传入的函数，函数返回true的项，会组成新数组后返回</li>
<li>map()：每一项都运行传入的函数，返回函数调用的结果构成新数组</li>
<li>forEach()：每一项都运行传入的函数，没有返回值<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> everyResult = numbers.<span class="title function_">every</span>(<span class="function">(<span class="params">item, index, array</span>) =&gt;</span> item &gt; <span class="number">2</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(everyResult);     <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> someResult = numbers.<span class="title function_">some</span>(<span class="function">(<span class="params">item, index, array</span>) =&gt;</span> item &gt; <span class="number">2</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(someResult);      <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回一个所有数值都大于2的数组</span></span><br><span class="line"><span class="keyword">let</span> filterResult = numbers.<span class="title function_">filter</span>(<span class="function">(<span class="params">item, index, array</span>) =&gt;</span> item &gt; <span class="number">2</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(filterResult);    <span class="comment">// [3, 4, 5, 4, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 每一项都乘以2</span></span><br><span class="line"><span class="keyword">let</span> mapResult = numbers.<span class="title function_">map</span>(<span class="function">(<span class="params">item, index, array</span>) =&gt;</span> item * <span class="number">2</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mapResult);       <span class="comment">// [2, 4, 6, 8, 10, 8, 6, 4, 2]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// forEach()方法相当于使用for循环遍历数组</span></span><br><span class="line">numbers.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index, array</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 执行某些操作</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>归并方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> values = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sum1 = values.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev, cur, index, array</span>) =&gt;</span> prev + cur);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sum1);    <span class="comment">// 15，过程1+2+3+4+5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sum2 = values.<span class="title function_">reduceRight</span>(<span class="keyword">function</span>(<span class="params">prev, cur, index, array</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> prev + cur;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sum2);    <span class="comment">// 15，过程5+4+3+2+1</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="6-3-定型数组"><a href="#6-3-定型数组" class="headerlink" title="6.3 定型数组"></a>6.3 定型数组</h3><ol start="17">
<li><p>ArrayBuffer()：用于内存中分配特定数量的字节空间，创建就不能再调整大小</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> buf = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">16</span>);    <span class="comment">// 在内存中分配16字节</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf.<span class="property">byteLength</span>);        <span class="comment">// 16</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>DataView：允许你读写ArrayBuffer的视图；DataView使用ElementType来实现JavaScript的Number类型到缓冲内二进制格式的转换；默认为大端字节序</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> buf = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">16</span>);    <span class="comment">// 在内存中分配16字节</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dv = <span class="keyword">new</span> <span class="title class_">DataView</span>(buf, <span class="number">0</span>, <span class="number">8</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dv.<span class="property">byteOffset</span>);     <span class="comment">// 0，表示视图从缓冲起点开始</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dv.<span class="property">byteLength</span>);     <span class="comment">// 8，限制视图为前 8 个字节</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>定型数组：另一种形式的ArrayBuffer视图；特定于一种ElementType且遵循系统原生的字节序；目的是提高WebGL等原生库交换二进制数据的效率；定型数组两个新方法</p>
<ul>
<li>set()：复制值到指定的索引位置<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建长度为8的int16数组</span></span><br><span class="line"><span class="keyword">const</span> container = <span class="keyword">new</span> <span class="title class_">Int16Array</span>(<span class="number">8</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把定型数组复制为前4个值</span></span><br><span class="line"><span class="comment">// 偏移量默认为索引0</span></span><br><span class="line">container.<span class="title function_">set</span>(<span class="title class_">Int8Array</span>.<span class="title function_">of</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(container);   <span class="comment">// [1,2,3,4,0,0,0,0]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 把普通数组复制为后4个值</span></span><br><span class="line"><span class="comment">// 偏移量4表示从索引4开始插入</span></span><br><span class="line">container.<span class="title function_">set</span>([<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>], <span class="number">4</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(container);   <span class="comment">// [1,2,3,4,5,6,7,8]</span></span><br></pre></td></tr></table></figure></li>
<li>subarray()：复制值返回一个新定型数组；参数可选开始索引和结束索引<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> source = <span class="title class_">Int16Array</span>.<span class="title function_">of</span>(<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 从索引1开始复制到索引3</span></span><br><span class="line"><span class="keyword">const</span> partialCopy = source.<span class="title function_">subarray</span>(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(partialCopy);     <span class="comment">// [4, 6]</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h3 id="6-4-Map"><a href="#6-4-Map" class="headerlink" title="6.4 Map"></a>6.4 Map</h3><ol start="20">
<li>创建Map构造函数；建议键&#x2F;值存放使用Map</li>
<li>Map实例化方法和属性<ul>
<li>set()：添加键&#x2F;值对</li>
<li>get()：查询键，获取值</li>
<li>has()：判断Map中是否存在键</li>
<li>size：获取键&#x2F;值对数量</li>
<li>delete()：删除参数中的键&#x2F;值对，参数是键</li>
<li>clear()：删除全部键&#x2F;值对<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> m1 = <span class="keyword">new</span> <span class="title class_">Map</span>([</span><br><span class="line">  [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;幽蓝&#x27;</span>],</span><br><span class="line">  [<span class="literal">true</span>, <span class="string">&#x27;true&#x27;</span>]</span><br><span class="line">]);</span><br><span class="line">m1.<span class="title function_">set</span>(<span class="string">&#x27;age&#x27;</span>, <span class="number">9</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m1.<span class="title function_">get</span>(<span class="string">&#x27;name&#x27;</span>), m1.<span class="title function_">get</span>(<span class="string">&#x27;age&#x27;</span>));    <span class="comment">// 幽蓝 9</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m1.<span class="title function_">has</span>(<span class="string">&#x27;age&#x27;</span>), m1.<span class="title function_">has</span>(<span class="string">&#x27;sex&#x27;</span>));    <span class="comment">// true false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m1.<span class="property">size</span>);   <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line">m1.<span class="title function_">delete</span>(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m1);    <span class="comment">// &#123; true =&gt; &#x27;true&#x27;, &#x27;age&#x27; =&gt; 9 &#125;</span></span><br><span class="line"></span><br><span class="line">m1.<span class="title function_">clear</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m1, <span class="keyword">typeof</span> m1);    <span class="comment">// &#123;&#125; object</span></span><br></pre></td></tr></table></figure></li>
<li>entries()：Map迭代器，能以插入顺序生成[key, value]形式的数组<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> m = <span class="keyword">new</span> <span class="title class_">Map</span>([</span><br><span class="line">  [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;幽蓝&#x27;</span>],</span><br><span class="line">  [<span class="string">&#x27;age&#x27;</span>, <span class="number">9</span>],</span><br><span class="line">  [<span class="literal">true</span>, <span class="string">&#x27;true&#x27;</span>]</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> pair <span class="keyword">of</span> m.<span class="title function_">entries</span>()) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(pair);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// [ &#x27;name&#x27;, &#x27;幽蓝&#x27; ]</span></span><br><span class="line"><span class="comment">// [ &#x27;age&#x27;, 9 ]</span></span><br><span class="line"><span class="comment">// [ true, &#x27;true&#x27; ]</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h3 id="6-5-WeakMap"><a href="#6-5-WeakMap" class="headerlink" title="6.5 WeakMap"></a>6.5 WeakMap</h3><ol start="22">
<li><p>创建WeakMap构造函数；键只能是引用类型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> k1 = &#123;<span class="attr">id</span>: <span class="number">1</span>&#125;,</span><br><span class="line">      k2 = &#123;<span class="attr">id</span>: <span class="number">2</span>&#125;,</span><br><span class="line">      k3 = &#123;<span class="attr">id</span>: <span class="number">3</span>&#125;;</span><br><span class="line"><span class="keyword">const</span> wm1 = <span class="keyword">new</span> <span class="title class_">WeakMap</span>([</span><br><span class="line">  [k1, <span class="string">&#x27;val1&#x27;</span>],</span><br><span class="line">  [k2, <span class="string">&#x27;val2&#x27;</span>],</span><br><span class="line">  [k3, <span class="string">&#x27;val3&#x27;</span>],</span><br><span class="line">]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(wm1.<span class="title function_">get</span>(k1), wm1.<span class="title function_">get</span>(k2), wm1.<span class="title function_">get</span>(k3));   <span class="comment">// val1 val2 val3</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>WeakMap实例化方法：set()、get()、has()、delete()</p>
</li>
<li><p>应用场景：DOM节点是引用类型，WeakMap可以绑定成键，如果绑定的DOM节点被删除，垃圾回收程序可以立即释放其内存，而Map则不会释放内存，这也是WeakMap一项优势</p>
</li>
</ol>
<h3 id="6-6-Set"><a href="#6-6-Set" class="headerlink" title="6.6 Set"></a>6.6 Set</h3><ol start="25">
<li><p>Set实例化方法和属性</p>
<ul>
<li>add()：增加值，重复值会被替换</li>
<li>has()、Set.size、delete()、clear()</li>
<li>entries()：两个元素的数组<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line">s1.<span class="title function_">add</span>(<span class="number">1</span>)</span><br><span class="line">  .<span class="title function_">add</span>(<span class="number">2</span>)</span><br><span class="line">  .<span class="title function_">add</span>(<span class="number">2</span>)</span><br><span class="line">  .<span class="title function_">add</span>(<span class="string">&#x27;幽蓝&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s1);         <span class="comment">// &#123; 1, 2, &#x27;幽蓝&#x27; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以数组去重</span></span><br><span class="line"><span class="keyword">const</span> s2 = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>];</span><br><span class="line"><span class="keyword">const</span> s3 = <span class="keyword">new</span> <span class="title class_">Set</span>(s2);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s3);    <span class="comment">// &#123; 1, 2, 3, 5, 6 &#125;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Set没有索引值，本身是无序的，但迭代器能以插入顺序生成集合内容；values()和keys()是相同的</p>
</li>
</ol>
<h3 id="6-7-WeakSet"><a href="#6-7-WeakSet" class="headerlink" title="6.7 WeakSet"></a>6.7 WeakSet</h3><ol start="27">
<li><p>创建WeakSet构造函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> k1 = &#123;<span class="attr">id</span>: <span class="number">1</span>&#125;,</span><br><span class="line">      k2 = &#123;<span class="attr">id</span>: <span class="number">2</span>&#125;,</span><br><span class="line">      k3 = &#123;<span class="attr">id</span>: <span class="number">3</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ws = <span class="keyword">new</span> <span class="title class_">WeakSet</span>([k1, k2, k3]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ws.<span class="title function_">has</span>(k1), ws.<span class="title function_">has</span>(k2), ws.<span class="title function_">has</span>(k3));    <span class="comment">// true ...</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>WeakSet实例化方法和属性：add()、has()、delete()</p>
</li>
<li><p>总结：WeakMap使用较多，WeakSet使用较少，两者应用场景都在DOM节点上，能让垃圾回收程序立即释放其内存；而Map、Set则不会释放内存</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ws1 = <span class="keyword">new</span> <span class="title class_">WeakSet</span>();</span><br><span class="line">ws1.<span class="title function_">add</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line">ws1.<span class="title function_">add</span>(&#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置定时器看垃圾回收触发，去浏览器控制台看</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ws1);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="6-8-迭代与扩展操作"><a href="#6-8-迭代与扩展操作" class="headerlink" title="6.8 迭代与扩展操作"></a>6.8 迭代与扩展操作</h3><ol start="30">
<li>原生集合类型：Array、所有定型数组、Map、Set</li>
</ol>
<h2 id="第七章-迭代器与生成器"><a href="#第七章-迭代器与生成器" class="headerlink" title="第七章 迭代器与生成器"></a>第七章 迭代器与生成器</h2><h3 id="7-2-迭代器模式"><a href="#7-2-迭代器模式" class="headerlink" title="7.2 迭代器模式"></a>7.2 迭代器模式</h3><ol>
<li>迭代器模式：集合类型、类数组提供iterable接口；默认迭代器Symbol.iterator，调用之后会产生一个实现Iterator接口的对象</li>
<li>可迭代对象的原生语言特性<ul>
<li>for-of循环</li>
<li>数组解构</li>
<li>扩展操作符</li>
<li>Array.from()</li>
<li>创建集合</li>
<li>创建映射</li>
<li>Promise.all()接收由期约组成的可迭代对象</li>
<li>Promise.race()接收由期约组成的可迭代对象</li>
<li>yield*操作符，在生成器中使用</li>
</ul>
</li>
<li>迭代器协议：next()在可迭代对象中遍历数据，成功调用返回IteratorResult对象，这个对象包含value和done属性，持续调用next()，直到value为undefined且done为true，后面始终重复<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> iter = arr[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(iter.<span class="title function_">next</span>());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &#123; value: 1, done: false &#125;</span></span><br><span class="line"><span class="comment">// &#123; value: 2, done: false &#125;</span></span><br><span class="line"><span class="comment">// &#123; value: 3, done: false &#125;</span></span><br><span class="line"><span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br><span class="line"><span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="7-3-生成器"><a href="#7-3-生成器" class="headerlink" title="7.3 生成器"></a>7.3 生成器</h3><ol start="4">
<li>生成器：函数名称前加一个型号（*）表示它是一个生成器，箭头函数不能定义生成器函数；yield关键字可以让生成器停止和开始执行，而给关键字加星号表示继续迭代<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">func1</span>(<span class="params">...nums</span>) &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;--func1--&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span>* nums;</span><br><span class="line">  <span class="keyword">yield</span>* <span class="title function_">func2</span>(<span class="number">101</span>, <span class="number">102</span>);   <span class="comment">// func2() 返回的函数参数也可以迭代</span></span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;--end--&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">func2</span>(<span class="params">...nums</span>) &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;--func2--&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span> nums;</span><br><span class="line">  <span class="keyword">yield</span>* nums;</span><br><span class="line">  <span class="keyword">yield</span>* <span class="string">&#x27;对不起&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span>* <span class="title function_">func3</span>(<span class="string">&#x27;幽蓝&#x27;</span>, <span class="string">&#x27;9&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">func3</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&#x27;--func3--&#x27;</span>;</span><br><span class="line">  <span class="keyword">yield</span>* <span class="variable language_">arguments</span>;   <span class="comment">// arguments也是可迭代对象</span></span><br><span class="line">  <span class="keyword">yield</span>* <span class="title function_">funcNoStar</span>(<span class="variable language_">arguments</span>);   <span class="comment">// 函数返回值是可迭代对象</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">funcNoStar</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> res = [<span class="string">&#x27;--funcNoStar--&#x27;</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> a <span class="keyword">of</span> arr) &#123;</span><br><span class="line">    res.<span class="title function_">push</span>(...a)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> <span class="title function_">func1</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// --func1--</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"><span class="comment">// --func2--</span></span><br><span class="line"><span class="comment">// [ 101, 102 ]</span></span><br><span class="line"><span class="comment">// 101</span></span><br><span class="line"><span class="comment">// 102</span></span><br><span class="line"><span class="comment">// 对</span></span><br><span class="line"><span class="comment">// 不</span></span><br><span class="line"><span class="comment">// 起</span></span><br><span class="line"><span class="comment">// --func3--</span></span><br><span class="line"><span class="comment">// 幽蓝</span></span><br><span class="line"><span class="comment">// 9</span></span><br><span class="line"><span class="comment">// --funcNoStar--</span></span><br><span class="line"><span class="comment">// 幽</span></span><br><span class="line"><span class="comment">// 蓝</span></span><br><span class="line"><span class="comment">// 9</span></span><br><span class="line"><span class="comment">// --end--</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="第八章-对象、类与面向对象编程"><a href="#第八章-对象、类与面向对象编程" class="headerlink" title="第八章 对象、类与面向对象编程"></a>第八章 对象、类与面向对象编程</h2><h3 id="8-1-理解对象"><a href="#8-1-理解对象" class="headerlink" title="8.1 理解对象"></a>8.1 理解对象</h3><ol>
<li><p>两种属性：数据属性和访问属性。特性：描述属性的特征，是为了JavaScript引擎的规范定义，不能直接访问<br> 1.1数据属性4个特性</p>
<ul>
<li>[[Configurable]]：表示属性是否可以通过delete删除并重新定义，是否可以修改它的特性，以及是否可以把它改为访问器属性</li>
<li>[[Enumerable]]：表示属性是否可以通过for-in循环返回</li>
<li>[[Writable]]：表示属性的值是否可以被修改</li>
<li>[[Value]]：包含属性实际的值</li>
</ul>
<p> 1.2 访问属性4个特性</p>
<ul>
<li>[[Configurable]]：表示属性是否可以通过delete删除并重新定义，是否可以修改它的特性，以及是否可以把它改为数据属性</li>
<li>[[Enumerable]]：表示属性是否可以通过for-in循环返回</li>
<li>[[Get]]：获取函数，在读取属性时调用</li>
<li>[[Set]]：设置函数，在写入属性时调用</li>
</ul>
</li>
<li><p>定义及读取特性</p>
<ul>
<li>Object.defineProperty()</li>
<li>Object.defineProperties()</li>
<li>Object.getOwnPropertyDescriptor()</li>
</ul>
</li>
<li><p>合并对象：Object.assign()</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dest, src, result;</span><br><span class="line">dest = &#123;&#125;;</span><br><span class="line">src = &#123;<span class="attr">id</span>: <span class="string">&#x27;幽蓝&#x27;</span>&#125;;</span><br><span class="line">result = <span class="title class_">Object</span>.<span class="title function_">assign</span>(dest, src, &#123;<span class="attr">age</span>: <span class="number">9</span>&#125;, &#123;<span class="attr">age</span>: <span class="number">10</span>&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dest === result, src !== result);   <span class="comment">// true true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dest, result);                      <span class="comment">// &#123; id: &#x27;幽蓝&#x27;, age: 10 &#125; &#123; id: &#x27;幽蓝&#x27;, age: 10 &#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>对象标识及相等判定：Object.is()，改善全等（&#x3D;&#x3D;&#x3D;）问题</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">is</span>(<span class="literal">true</span>, <span class="number">1</span>),</span><br><span class="line">            <span class="title class_">Object</span>.<span class="title function_">is</span>(&#123;&#125;, &#123;&#125;),</span><br><span class="line">            <span class="title class_">Object</span>.<span class="title function_">is</span>(<span class="string">&#x27;2&#x27;</span>, <span class="number">2</span>));     <span class="comment">// false false false</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">is</span>(+<span class="number">0</span>, -<span class="number">0</span>),</span><br><span class="line">            <span class="title class_">Object</span>.<span class="title function_">is</span>(+<span class="number">0</span>, <span class="number">0</span>),</span><br><span class="line">            <span class="title class_">Object</span>.<span class="title function_">is</span>(-<span class="number">0</span>, <span class="number">0</span>));      <span class="comment">// false true false</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">is</span>(<span class="title class_">NaN</span>, <span class="title class_">NaN</span>));   <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>对象解构：使用与对象匹配的结构来实现对象属性赋值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;幽蓝&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">9</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;name, age, likeColor = <span class="string">&#x27;blue&#x27;</span>&#125; = p;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name, age, likeColor);    <span class="comment">// 幽蓝 9 blue</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="8-2-创建对象"><a href="#8-2-创建对象" class="headerlink" title="8.2 创建对象"></a>8.2 创建对象</h3><ol>
<li><p>工厂模式：虽然可以解决创建多个类似对象的问题，但没有解决对象标识问题</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createPerson</span>(<span class="params">name, age, job</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> o = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">  o.<span class="property">name</span> = name;</span><br><span class="line">  o.<span class="property">age</span> = age;</span><br><span class="line">  o.<span class="property">job</span> = job;</span><br><span class="line">  o.<span class="property">sayName</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p1 = <span class="title function_">createPerson</span>(<span class="string">&#x27;幽蓝&#x27;</span>, <span class="number">9</span>, <span class="string">&#x27;Software Engineer&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> p2 = <span class="title function_">createPerson</span>(<span class="string">&#x27;金涛&#x27;</span>, <span class="number">20</span>, <span class="string">&#x27;coach&#x27;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>构造函数模式：构造函数应该以大写字母开头</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span> (name, age, job)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">job</span> = job;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">sayName</span> = <span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;幽蓝&#x27;</span>, <span class="number">9</span>, <span class="string">&#x27;Software Engineer&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;金涛&#x27;</span>, <span class="number">20</span>, <span class="string">&#x27;coach&#x27;</span>);</span><br><span class="line"></span><br><span class="line">p1.<span class="title function_">sayName</span>();   <span class="comment">// 幽蓝</span></span><br><span class="line">p2.<span class="title function_">sayName</span>();   <span class="comment">// 金涛</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// p1 p2 分别保存着Person的一个不同的实例，这两个对象都有一个constructor属性，该属性指向Person</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="property">constructor</span>);  <span class="comment">// function Person(name, age, job) &#123;...</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1 <span class="keyword">instanceof</span> <span class="title class_">Object</span>);  <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1 <span class="keyword">instanceof</span> <span class="title class_">Person</span>);  <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p> 2.1 这种方法会经历5个步骤</p>
<ul>
<li>在内存中创建一个新对象</li>
<li>这个新对象内部的[[Prototype]]特性被赋值为构造函数的 prototype属性</li>
<li>构造函数内部的this被赋值为这个新对象(即this指向新对象)</li>
<li>执行构造函数内部的代码(给新对象添加属性)</li>
<li>如果构造函数返回非空对象，则返回该对象;否则，返回刚创建的新对象</li>
</ul>
<p> 2.2 构造函数的问题：每个方法会在每个实例上创建一遍<br> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="property">sayName</span> == p2.<span class="property">sayName</span>);    <span class="comment">// false</span></span><br></pre></td></tr></table></figure></p>
</li>
<li><p>原型模式：每个函数都有一个prototype属性，这个属性是一个指针，指向一个对象（函数的原型对象），这个对象包含可以由该类型的所有实例共享的属性和方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">name</span> = <span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">age</span> = <span class="number">18</span>;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">job</span> = <span class="string">&#x27;student&#x27;</span>;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayName</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="property">sayName</span> === p2.<span class="property">sayName</span>);   <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p> 3.1 理解原型</p>
<ul>
<li>只要创建一个函数，就会按照特定的规则为这个函数创建一个prototype属性(指向原型对象)</li>
<li>默认所有原型对象自动获得一个名为constructor的属性，指向与之关联的构造函数</li>
<li>调用构造函数创建新实例后，实例将有一个__proto__属性，指向构造函数的原型对象，指针叫[[Prototype]]，默认原型指向Object</li>
<li>实例与构造函数之间没有直接关系</li>
<li>读取属性：搜索先从对象实例本身开始，如果没找到，搜索原型对象</li>
<li>使用isPrototype()来检测构造函数和实例之间是否有关系</li>
<li>使用hasOwnProperty()来检测属性存在于实例中还是原型中</li>
<li>原型和in操作符 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// in操作符通过实例或原型访问到属性时返回true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;name&#x27;</span> <span class="keyword">in</span> p1);    <span class="comment">// true   </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 枚举属性</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> prop <span class="keyword">in</span> p1) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(prop);    <span class="comment">// name age job sayName</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Object.keys 返回一个所有元素为字符串的数组</span></span><br><span class="line">p1.<span class="property">name</span> = <span class="string">&#x27;幽蓝&#x27;</span>;</span><br><span class="line">p1.<span class="property">age</span> = <span class="number">9</span>;</span><br><span class="line">p1.<span class="property">sayHello</span> = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">keys</span>(p1))    <span class="comment">// [ &#x27;name&#x27;, &#x27;age&#x27;, &#x27;sayHello&#x27; ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Object.getOwnPropertyNames() 返回所有实例属性，无论是否可以枚举</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getOwnPropertyNames</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>));   <span class="comment">// [ &#x27;constructor&#x27;, &#x27;name&#x27;, &#x27;age&#x27;, &#x27;job&#x27;, &#x27;sayName&#x27; ]</span></span><br></pre></td></tr></table></figure></li>
<li>用对象字面量重写原型对象 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span> = &#123;</span><br><span class="line">  <span class="attr">constructor</span>: <span class="title class_">Person</span>,    <span class="comment">// 这里重写了prototype，不再默认有constructor属性</span></span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;幽蓝&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">9</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h3 id="8-3-继承"><a href="#8-3-继承" class="headerlink" title="8.3 继承"></a>8.3 继承</h3><ol>
<li><p>JavaScript中使用最多的继承模式：组合继承，融合原形链和构造函数的优点</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">SuperType</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">color</span> = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">SuperType</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayName</span> = <span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">SubType</span>(<span class="params">name, age</span>)&#123;</span><br><span class="line">  <span class="title class_">SuperType</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, name);         <span class="comment">// 借用构造函数</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">SubType</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">SuperType</span>();  <span class="comment">// 原型链</span></span><br><span class="line"><span class="title class_">SubType</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">SubType</span>;</span><br><span class="line"><span class="title class_">SubType</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayAge</span> = <span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">age</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> instance = <span class="keyword">new</span> <span class="title class_">SubType</span>(<span class="string">&#x27;幽蓝&#x27;</span>, <span class="number">9</span>);</span><br><span class="line">instance.<span class="title function_">sayName</span>();   <span class="comment">// 幽蓝</span></span><br><span class="line">instance.<span class="title function_">sayAge</span>();    <span class="comment">// 9</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>确定原型和实例的关系</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(instance <span class="keyword">instanceof</span> <span class="title class_">SuperType</span>);   <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">SuperType</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="title function_">isPrototypeOf</span>(instance));   <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>原型式继承、寄生式继承、寄生组合式继承<br>task</p>
<h3 id="8-4-类"><a href="#8-4-类" class="headerlink" title="8.4 类"></a>8.4 类</h3></li>
<li><p>class类名的首字母要大写；类不能声明提升；类是块级作用域</p>
</li>
<li><p>constructor关键字：定义块内部创建类的构造函数，用new调用类的构造函数操作</p>
<ul>
<li>在内存中创建一个新对象</li>
<li>这个新对象内部的[[Prototype]]指针被赋值为构造函数的prototype属性</li>
<li>构造函数内部的this被赋值为这个新对象(即this指向新对象)</li>
<li>执行构造函数内部的代码(给新对象添加属性)</li>
<li>如果构造函数返回非空对象，则返回该对象;否则，返回刚创建的新对象</li>
</ul>
</li>
<li><p>类构造函数与构造函数区别：调用类构造函数必须用new操作符；调用普通构造函数不用new操作符，以全局this作为内部对象</p>
</li>
<li><p>原型方法与访问器：实例间共享方法，类定义语法把在类块中定义的方法作为原型方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">locate</span> = <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;instance&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">locate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;prototype&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">p.<span class="title function_">locate</span>();                   <span class="comment">// instance</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="title function_">locate</span>();    <span class="comment">// prototype</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>类继承：extends关键字，继承任何拥有[[Construct]]和原型的对象；super关键字引用它们的原型，super只能使用在派生类构造函数和静态方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello，我是父类&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Ulan</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name, age, job</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(name, age);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">job</span> = job;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>.<span class="title function_">sayHello</span>();   <span class="comment">// 调用父类方法</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello，我是幽蓝&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ul = <span class="keyword">new</span> <span class="title class_">Ulan</span>(<span class="string">&#x27;幽蓝&#x27;</span>, <span class="number">9</span>, <span class="string">&#x27;software engineer&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ul);    <span class="comment">// Ulan &#123; name: &#x27;幽蓝&#x27;, age: 9, job: &#x27;software engineer&#x27; &#125;</span></span><br><span class="line">ul.<span class="title function_">sayHello</span>();</span><br><span class="line"><span class="comment">// hello，我是父类</span></span><br><span class="line"><span class="comment">// hello，我是幽蓝</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>静态方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello，我是父类&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello，我是静态父类&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Ulan</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 方法相同，子类覆盖父类</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello，我是幽蓝&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>.<span class="title function_">sayHello</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello，我是静态幽蓝&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ul = <span class="keyword">new</span> <span class="title class_">Ulan</span>();</span><br><span class="line">ul.<span class="title function_">sayHello</span>();    <span class="comment">// hello，我是幽蓝</span></span><br><span class="line"><span class="title class_">Ulan</span>.<span class="title function_">sayHello</span>();</span><br><span class="line"><span class="comment">// hello，我是静态父类</span></span><br><span class="line"><span class="comment">// hello，我是静态幽蓝</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="第九章-代理与反射"><a href="#第九章-代理与反射" class="headerlink" title="第九章 代理与反射"></a>第九章 代理与反射</h2><h3 id="9-1-代理基础"><a href="#9-1-代理基础" class="headerlink" title="9.1 代理基础"></a>9.1 代理基础</h3><ol>
<li><p>创建Proxy构造函数，接收两个参数：目标对象和处理程序对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> target = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="string">&#x27;幽蓝&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> handler = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> proxy = <span class="keyword">new</span> <span class="title class_">Proxy</span>(target, handler);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(target.<span class="property">id</span>, proxy.<span class="property">id</span>);   <span class="comment">// 幽蓝 幽蓝</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 目标属性赋值会反映到两个对象上</span></span><br><span class="line">target.<span class="property">id</span> = <span class="string">&#x27;ulan&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(target.<span class="property">id</span>, proxy.<span class="property">id</span>);   <span class="comment">// ulan ulan</span></span><br><span class="line"><span class="comment">// 代理属性赋值会反映到两个对象上</span></span><br><span class="line">proxy.<span class="property">id</span> = <span class="string">&#x27;cat&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(target.<span class="property">id</span>, proxy.<span class="property">id</span>);   <span class="comment">// cat cat</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>get()捕获器：会在获取属性值的操作中被调用</p>
<ul>
<li>target：目标对象</li>
<li>property：引用的目标对象上的字符串键属性</li>
<li>receiver：代理对象或继承代理对象的对象</li>
</ul>
</li>
<li><p>get捕获器不变式：如果target.property不可写且不可配置，处理程序返回的值必须与target.property匹配；如果target.property不可配置且[[Get]]特性为undefined，处理程序的返回值也必须是undefined</p>
</li>
<li><p>revocable()：撤销代理对象与目标对象的关联</p>
</li>
<li><p>状态标记：反射方法返回称作”状态标记”的布尔值，表示要执行的操作是否成功</p>
</li>
</ol>
<h3 id="9-2-代理捕获器与反射方法"><a href="#9-2-代理捕获器与反射方法" class="headerlink" title="9.2 代理捕获器与反射方法"></a>9.2 代理捕获器与反射方法</h3><ol start="6">
<li>set()捕获器：会在设置属性值的操作中被调用<ul>
<li>target：目标对象</li>
<li>property：引用的目标对象上的字符串键属性</li>
<li>value：要赋给属性的值</li>
<li>receiver：接收最初赋值的对象</li>
</ul>
</li>
<li>set捕获器不变式：如果target.property不可写且不可配置，则不能修改目标属性的值；如果target.property不可配置且[[Set]]特性为undefined，则不能修改目标属性的值</li>
<li>其他捕获器<ul>
<li>has()捕获器会在in操作符中被调用</li>
<li>defineProperty()捕获器会在Object.defineProperty()中被调用</li>
<li>getOwnPropertyDescriptor()捕获器会在Object.getOwnPropertyDescriptor()中被调用</li>
<li>deleteProperty()捕获器会在delete操作符中被调用</li>
<li>ownKeys()捕获器会在Object.keys()及类似方法中被调用</li>
<li>getPrototypeOf()捕获器会在Object.getPrototypeOf()中被调用</li>
<li>setPrototypeOf()捕获器会在Object.setPrototypeOf()中被调用</li>
<li>isExtensible()捕获器会在Object.isExtensible()中被调用</li>
<li>preventExtensions()捕获器会在Object.preventExtensions()中被调用</li>
<li>apply()捕获器会在调用函数时中被调用</li>
<li>construct()捕获器会在new操作符中被调用<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;<span class="attr">name</span>: <span class="string">&#x27;幽蓝&#x27;</span>, <span class="attr">age</span>: <span class="number">9</span>&#125;;</span><br><span class="line"><span class="keyword">const</span> personProxy = <span class="keyword">new</span> <span class="title class_">Proxy</span>(person, &#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="params">target, key</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> target[key].<span class="title function_">toUpperCase</span>();   <span class="comment">// 获取name值并返回大写后的值</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">set</span>(<span class="params">target, key, value</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">      target[key] = value.<span class="title function_">trim</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">personProxy.<span class="property">name</span> = <span class="string">&#x27;ulan&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(personProxy.<span class="property">name</span>);    <span class="comment">// ULAN</span></span><br><span class="line"></span><br><span class="line">personProxy.<span class="property">love</span> = <span class="string">&#x27;     I love cat     &#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(personProxy.<span class="property">love</span>);    <span class="comment">// I LOVE CAT</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>, person.<span class="property">age</span>);   <span class="comment">// ulan 9</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h3 id="9-3-代理模式"><a href="#9-3-代理模式" class="headerlink" title="9.3 代理模式"></a>9.3 代理模式</h3><ol start="9">
<li>跟踪属性访问、隐藏属性、属性验证、函数与构造函数参数验证、数据绑定与可观察对象</li>
</ol>
<h2 id="第十章-函数"><a href="#第十章-函数" class="headerlink" title="第十章 函数"></a>第十章 函数</h2><h3 id="10-1-箭头函数"><a href="#10-1-箭头函数" class="headerlink" title="10.1 箭头函数"></a>10.1 箭头函数</h3><ol>
<li>箭头函数实例化，建议参数不管有多少加()，花括号也加上{}；箭头函数不适用场景：arguments、super、new.target和构造函数<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">sum</span> = (<span class="params">a, b</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">5</span>, <span class="number">8</span>));   <span class="comment">// 13</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ints = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ints.<span class="title function_">map</span>(<span class="function">(<span class="params">i</span>) =&gt;</span> &#123; <span class="keyword">return</span> i + <span class="number">1</span>; &#125;));    <span class="comment">// [2,3,4]</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="10-3-理解参数"><a href="#10-3-理解参数" class="headerlink" title="10.3 理解参数"></a>10.3 理解参数</h3><ol start="2">
<li>函数的参数在内部表现为一个数组，接收参数就是在接收数组；非箭头函数可在内部访问arguments对象，arguments对象是一个类数组对象，可用中括号语法访问其中的元素(第一个参数是arguments[0]，第二个参数是arguments[1])，函数的参数只是为了方便才写出来的，并不是必须写出来的<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>[<span class="number">0</span>], <span class="variable language_">arguments</span>[<span class="number">1</span>]);    <span class="comment">// hello world</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">a</span>(<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>);</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="10-5-默认参数值"><a href="#10-5-默认参数值" class="headerlink" title="10.5 默认参数值"></a>10.5 默认参数值</h3><ol start="3">
<li><p>参数后面用&#x3D;可以为参数赋一个默认值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">p</span>(<span class="params">name = <span class="string">&#x27;张三&#x27;</span>, age = <span class="number">18</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`个人信息： <span class="subst">$&#123;name&#125;</span> <span class="subst">$&#123;age&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">p</span>());   <span class="comment">// 个人信息： 张三 18</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">p</span>(<span class="string">&#x27;李四&#x27;</span>));   <span class="comment">// 个人信息： 李四 18</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">p</span>(<span class="string">&#x27;幽蓝&#x27;</span>, <span class="number">9</span>));    <span class="comment">// 个人信息： 幽蓝 9</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>暂时性死区：前面定义的参数不能引用后面定义的参数；参数也有自己的作用域，它们不能引用函数体的作用域</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params">name = age, age = <span class="number">9</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`名字：<span class="subst">$&#123;name&#125;</span> <span class="subst">$&#123;age&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">a</span>();    <span class="comment">// ReferenceError</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 作用域链先从自己身上找，找不到再向外找，直到全局作用域找不到返回错误</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">b</span>(<span class="params">name = <span class="string">&#x27;张三&#x27;</span>, age = getAge</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> getAge = <span class="number">18</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`个人信息：<span class="subst">$&#123;name&#125;</span>,&#123;age&#125;`</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">b</span>();    <span class="comment">// ReferenceError</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="10-6-参数扩展与收集"><a href="#10-6-参数扩展与收集" class="headerlink" title="10.6 参数扩展与收集"></a>10.6 参数扩展与收集</h3><ol start="5">
<li>扩展操作符：对可迭代对象以一个参数传入，然后进行拆分，最后返回每个值在单独传入<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getSum</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">arguments</span>.<span class="property">length</span>; ++i) &#123;</span><br><span class="line">    sum += <span class="variable language_">arguments</span>[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getSum</span>(arr));                     <span class="comment">// 01,2,3,4,10</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getSum</span>(...arr));                  <span class="comment">// 20</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getSum</span>(<span class="number">1</span>, ...arr, ...[<span class="number">4</span>, <span class="number">5</span>]));    <span class="comment">// 30</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getSum</span>(...[<span class="number">2</span>, <span class="number">3</span>]));               <span class="comment">// 5</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="10-9-函数内部"><a href="#10-9-函数内部" class="headerlink" title="10.9 函数内部"></a>10.9 函数内部</h3><ol start="6">
<li>谁调用this，this就指向谁；箭头函数的this指向箭头函数的上下文<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">King</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">royaltyName</span> = <span class="string">&#x27;Henry&#x27;</span>;</span><br><span class="line">  <span class="comment">// this 引用 King 的实例</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">royaltyName</span>), <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Queen</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">royaltyName</span> = <span class="string">&#x27;Elizabeth&#x27;</span>;</span><br><span class="line">  <span class="comment">// this 引用 window 对象</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">royaltyName</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">King</span>();  <span class="comment">// Henry</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Queen</span>(); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="10-10-函数属性与方法"><a href="#10-10-函数属性与方法" class="headerlink" title="10.10 函数属性与方法"></a>10.10 函数属性与方法</h3><ol start="7">
<li><p>apply()和call()强大的地方并不是给函数传参，而是控制函数体内this值的能力；两个方法的功能一样，区别在怎么给调用的函数传参更方便</p>
<ul>
<li>apply()：第一个参数是函数内this值，第二个参数是Array的实例，也可以是arguments对象</li>
<li>call()：第一个参数是函数内this值，第二个参数是将参数一个一个地列出来<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> sum.<span class="title function_">apply</span>(<span class="variable language_">this</span>, <span class="variable language_">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">b</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> sum.<span class="title function_">apply</span>(<span class="variable language_">this</span>, [num1, num2]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">c</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> sum.<span class="title function_">call</span>(<span class="variable language_">this</span>, num1, num2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">a</span>(<span class="number">10</span>, <span class="number">10</span>));   <span class="comment">// 20</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">b</span>(<span class="number">10</span>, <span class="number">10</span>));   <span class="comment">// 20</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">c</span>(<span class="number">10</span>, <span class="number">10</span>));   <span class="comment">// 20</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>bind()：创建一个新的函数实例，其this值会被绑定到传给bind()的对象上</p>
</li>
</ol>
<h3 id="10-12-递归"><a href="#10-12-递归" class="headerlink" title="10.12 递归"></a>10.12 递归</h3><ol start="9">
<li>arguments.callee指向正在执行的函数的指针，因此可以在函数内部递归调用<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">factorial</span>(<span class="params">num</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (num &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> num * <span class="variable language_">arguments</span>.<span class="title function_">callee</span>(num - <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = factorial;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">factorial</span>(<span class="number">5</span>));    <span class="comment">// 120, 5*4*3*2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">a</span>(<span class="number">4</span>));            <span class="comment">// 24, 4*3*2</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="10-13-尾调用优化"><a href="#10-13-尾调用优化" class="headerlink" title="10.13 尾调用优化"></a>10.13 尾调用优化</h3><ol start="10">
<li>尾调用优化的条件<ul>
<li>代码在严格模式下执行</li>
<li>外部函数的返回值是对尾调用函数的调用</li>
<li>尾调用函数返回后不需要执行额外的逻辑</li>
<li>尾调用函数不是引用外部函数作用域中自由变量的闭包</li>
</ul>
</li>
</ol>
<h3 id="10-14-闭包"><a href="#10-14-闭包" class="headerlink" title="10.14 闭包"></a>10.14 闭包</h3><ol start="11">
<li><p>闭包指的是引用另一个函数作用域中变量的函数</p>
</li>
<li><p>在调用一个函数时，会为这个函数调用创建一个执行上下文，并创建一个作用域链。然后用arguments和其他命名参数来初始化这个函数的活动对象。外部函数的活动对象是内部函数作用域链上的第二个对象。这个作用域链一直向外串起了所有包含函数的活动对象，直到全局执行上下文才终止</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 最外面是作用域链上的第三个对象</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">outer</span>(<span class="params"></span>) &#123;        <span class="comment">// outer函数是作用域链上的第二个对象</span></span><br><span class="line">  <span class="keyword">let</span> name = <span class="string">&#x27;幽蓝&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;    <span class="comment">// 匿名函数是作用域链上的第一个对象</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> inner = <span class="title function_">outer</span>();</span><br><span class="line"><span class="title function_">inner</span>();        <span class="comment">// 幽蓝</span></span><br><span class="line">inner = <span class="literal">null</span>;  <span class="comment">// 解除对outer内部的匿名函数的引用，以便释放内存</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>匿名函数中的this在非严格模式下等于window</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">name</span> = <span class="string">&#x27;The Window&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> object = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;My Object&#x27;</span>,</span><br><span class="line">  <span class="title function_">getNameFunc</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// The Window</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="10-16-私有变量"><a href="#10-16-私有变量" class="headerlink" title="10.16 私有变量"></a>10.16 私有变量</h3><ol start="14">
<li><p>任何定义在函数或块中的变量，都可以认为是私有变量</p>
</li>
<li><p>特权方法：能够访问函数私有变量（及私有函数）的公有方法，缺点是每个实例都会重新创建一遍新方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">MyObject</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 私有变量和私有函数</span></span><br><span class="line">  <span class="keyword">let</span> privateVariable = <span class="string">&#x27;幽蓝&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">privateFunction</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;_(:з」∠)_&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 特权方法</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">publicMethod</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(privateVariable);</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">privateFunction</span>();</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> o = <span class="keyword">new</span> <span class="title class_">MyObject</span>();</span><br><span class="line">o.<span class="title function_">publicMethod</span>();   <span class="comment">// 幽蓝 _(:з」∠)_</span></span><br><span class="line">o.<span class="title function_">privateFunction</span>();    <span class="comment">// TypeError: o.privateFunction is not a function at Object</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>静态私有变量：通过使用私有作用域定义私有变量和函数来实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 私有变量和私有函数</span></span><br><span class="line">  <span class="keyword">let</span> privateVariable = <span class="string">&#x27;幽蓝&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">privateFunction</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Σ（・□・；）&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 不使用关键字声明的变量会创建在全局作用域中</span></span><br><span class="line">  <span class="title class_">MyObject</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 公有和特权方法</span></span><br><span class="line">  <span class="title class_">MyObject</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">publicMethod</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(privateVariable);</span><br><span class="line">    <span class="title function_">privateFunction</span>();</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="keyword">let</span> o = <span class="keyword">new</span> <span class="title class_">MyObject</span>();</span><br><span class="line">o.<span class="title function_">publicMethod</span>();   <span class="comment">// 幽蓝 Σ（・□・；）</span></span><br><span class="line">o.<span class="title function_">privateFunction</span>();    <span class="comment">// TypeError: o.privateFunction is not a function at Object</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>模块模式：创建一个要通过匿名函数返回的对象字面量，这个对象字面量中只包含可以公开访问的属性和方法</p>
</li>
</ol>
<h2 id="第十一章-期约与异步函数"><a href="#第十一章-期约与异步函数" class="headerlink" title="第十一章 期约与异步函数"></a>第十一章 期约与异步函数</h2><h3 id="11-1-异步编程"><a href="#11-1-异步编程" class="headerlink" title="11.1 异步编程"></a>11.1 异步编程</h3><ol>
<li>同步行为对应内存中顺序执行的处理器指令，每条指令都会严格按照它们出现的顺序来执行，而每条指令执行后也能立即获得存储在系统本地（如寄存器或系统内存）的信息</li>
<li>异步行为是为了优化因计算量大而时间长的操作，行为类似于系统中断，即当前进程外部的实体可以触发代码执行；早期支持定义回调函数来表明异步操作完成。串联多个异步操作是一个常见的问题，通常需要深度嵌套(俗称“回调地狱”)来解决</li>
</ol>
<h3 id="11-2-Promise期约"><a href="#11-2-Promise期约" class="headerlink" title="11.2 Promise期约"></a>11.2 Promise期约</h3><ol start="3">
<li><p>创建Promise构造函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 男人和女人准备结婚，他们打算结婚前要个孩子</span></span><br><span class="line"><span class="comment">// 如果女人怀孕了，成功状态返回孩子他爹，失败状态返回老公</span></span><br><span class="line"><span class="comment">// 不论是否怀孕，最终都会结婚</span></span><br><span class="line"><span class="keyword">const</span> isPregnant = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (isPregnant) &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">`孩子他爹`</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">reject</span>(<span class="string">`老公`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">promise</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">name</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`男人成为了<span class="subst">$&#123;name&#125;</span>!`</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">name</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`男人成为了<span class="subst">$&#123;name&#125;</span>!`</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`男人和女人最终结婚了`</span>);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>Promise是一个有状态的对象，状态是私有的，不能直接通过js检测到，也不能被外部js修改，从而隔离外部同步代码；状态可能处于以下3种</p>
<ul>
<li>待定（pending）</li>
<li>成功（fulfilled，也称resolve）</li>
<li>失败（reject）</li>
</ul>
</li>
<li><p>Promise实例方法</p>
<ul>
<li>then()：实现了Thenable接口，接收两个参数onResolved处理程序和onRejected处理程序</li>
<li>catch()：添加拒绝处理程序，接收一个参数onRejected处理程序</li>
<li>finally()：添加onFinally处理程序，解决或拒绝状态时都会执行</li>
</ul>
</li>
<li><p>两个静态方法：Promise.all()和 Promise.race()</p>
<ul>
<li>Promise.all()：接收多个Promise对象，全部对象状态成功，all才会成功，其中一个状态失败，all才会失败，最终返回一个数组</li>
<li>Promise.race()：接收多个Promise对象，第一个对象状态成功，race才会成功，第一个对象状态失败，race才会失败<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 等待多少毫秒变化状态</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">delay</span> = ms =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(resolve, ms);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="title function_">delay</span>(<span class="number">1000</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;p1 完成了&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;p1&#x27;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="title function_">delay</span>(<span class="number">2000</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;p2 完成了&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;p2&#x27;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pAll = <span class="title class_">Promise</span>.<span class="title function_">all</span>([p1, p2]);</span><br><span class="line">pAll.<span class="title function_">then</span>(</span><br><span class="line">  <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">// p1 完成了</span></span><br><span class="line"><span class="comment">// p2 完成了</span></span><br><span class="line"><span class="comment">// [ &#x27;p1&#x27;, &#x27;p2&#x27; ]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pRace = <span class="title class_">Promise</span>.<span class="title function_">race</span>([p1, p2]);</span><br><span class="line">pRace.<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// p1 完成了</span></span><br><span class="line"><span class="comment">// p1</span></span><br><span class="line"><span class="comment">// p2 完成了</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h3 id="11-3-异步函数"><a href="#11-3-异步函数" class="headerlink" title="11.3 异步函数"></a>11.3 异步函数</h3><ol start="7">
<li>async关键字用于声明异步函数；await关键字可以暂停异步函数代码的执行，等待Promise解决<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">start</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">start</span>();</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="第十二章-BOM"><a href="#第十二章-BOM" class="headerlink" title="第十二章 BOM"></a>第十二章 BOM</h2><h3 id="12-1-window对象"><a href="#12-1-window对象" class="headerlink" title="12.1 window对象"></a>12.1 window对象</h3><ol>
<li><p>screenLeft和screenTop属性，表示窗口相对于屏幕左侧和顶部的位置</p>
</li>
<li><p>moveTo()接收要移动到的新位置的绝对坐标x和y；而moveBy()则接收相对当前位置在两个方向上移动的像素数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 把窗口移动到左上角</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">moveTo</span>(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把窗口向下移动100像素</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">moveBy</span>(<span class="number">0</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把窗口移动到坐标位置(200, 300)</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">moveTo</span>(<span class="number">200</span>, <span class="number">300</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把窗口向左移动50像素</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">moveBy</span>(-<span class="number">50</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>窗口大小</p>
<ul>
<li>outerWidth和outerHeight：浏览器窗口自身的大小</li>
<li>innerWidth和innerHeight：浏览器窗口中页面视口的大小</li>
<li>document.documentElement.clientWidth和document.documentElement.clientHeight：页面视口的宽度和高度</li>
<li>resizeTo()接收新的宽度和高度值；resizeBy()接收宽度和高度要缩放多少<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 缩放到100×100</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">resizeTo</span>(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 缩放到200×150</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">resizeBy</span>(<span class="number">100</span>, <span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 缩放到300×300</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">resizeTo</span>(<span class="number">300</span>, <span class="number">300</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>视口位置</p>
<ul>
<li>scroll() 、scrollTo()表示要滚动到的坐标</li>
<li>scrollBy() 表示要滚动的距离<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 相对于当前视口向下滚动100像素</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">scrollBy</span>(<span class="number">0</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 相对于当前视口向右滚动40像素</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">scrollBy</span>(<span class="number">40</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 滚动到页面左上角</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 滚动到距离屏幕左边及顶边各100像素的位置</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(<span class="number">100</span>, <span class="number">100</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>window.open()：导航到指定URL，也可以用于打开新浏览器窗口接收4个参数:</p>
<ul>
<li>要加载的URL</li>
<li>目标窗口</li>
<li>特性字符串</li>
<li>新窗口在浏览器历史记录中是否替代当前加载页面的布尔值<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 与&lt;a href=&quot;http://www.wrox.com&quot; target=&quot;topFrame&quot;/&gt;相同</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">open</span>(<span class="string">&quot;http://www.wrox.com/&quot;</span>, <span class="string">&quot;topFrame&quot;</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>定时器</p>
<ul>
<li>setTimeout()指定在一定时间后执行某些代码；clearTimeout()可以取消超时任务，任务执行后再调用clearTimeout()没有效果</li>
<li>setInterval()指定每隔一段时间执行某些代码；clearInterval()可以取消循环定时，如果不设置，定时任务会一直执行到页面卸载<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hi&#x27;</span>), <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello&#x27;</span>), <span class="number">2000</span>);</span><br><span class="line"><span class="comment">// hi</span></span><br><span class="line"><span class="comment">// hello</span></span><br><span class="line"><span class="comment">// hello</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> timeoutId = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hi&#x27;</span>), <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">clearTimeout</span>(timeoutId);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> num = <span class="number">0</span>, max = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> incrementNumber = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  num++;</span><br><span class="line">  <span class="keyword">if</span> (num === max) &#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(intervalId);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;终止&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> intervalId = <span class="built_in">setInterval</span>(incrementNumber, <span class="number">500</span>);</span><br><span class="line"><span class="comment">// ...5秒后</span></span><br><span class="line"><span class="comment">// 终止</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h3 id="12-2-location对象"><a href="#12-2-location对象" class="headerlink" title="12.2 location对象"></a>12.2 location对象</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 给属性赋值命令浏览器进行页面跳转</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">location</span> = <span class="string">&#x27;https://github.com/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重新加载页面，参数true表示强制从服务器强制加载</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">location</span>.<span class="title function_">reload</span>(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure>

<h3 id="12-3-navigator对象"><a href="#12-3-navigator对象" class="headerlink" title="12.3 navigator对象"></a>12.3 navigator对象</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 浏览器版本</span></span><br><span class="line">navigator.<span class="property">appVersion</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户代理</span></span><br><span class="line">navigator.<span class="property">userAgent</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 操作系统</span></span><br><span class="line">navigator.<span class="property">platform</span>;</span><br></pre></td></tr></table></figure>

<h3 id="12-5-history对象"><a href="#12-5-history对象" class="headerlink" title="12.5 history对象"></a>12.5 history对象</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">history.<span class="title function_">back</span>();     <span class="comment">// 后退一页</span></span><br><span class="line">history.<span class="title function_">forward</span>();  <span class="comment">// 前进一页</span></span><br><span class="line"></span><br><span class="line">history.<span class="title function_">go</span>(-<span class="number">1</span>); <span class="comment">// 后退一页</span></span><br><span class="line">history.<span class="title function_">go</span>(<span class="number">1</span>);  <span class="comment">// 前进一页</span></span><br></pre></td></tr></table></figure>

<h2 id="第十三章-客户端检测"><a href="#第十三章-客户端检测" class="headerlink" title="第十三章 客户端检测"></a>第十三章 客户端检测</h2><h3 id="13-2-用户代理检测"><a href="#13-2-用户代理检测" class="headerlink" title="13.2 用户代理检测"></a>13.2 用户代理检测</h3><ol>
<li>浏览器核心<ul>
<li>Firefox的渲染引擎是Gecko</li>
<li>Safari的渲染引擎是WebKit</li>
<li>Chrome的渲染引擎是Blink，使用V8作为JavaScript引擎</li>
</ul>
</li>
</ol>
<h3 id="13-3-软件与硬件检测"><a href="#13-3-软件与硬件检测" class="headerlink" title="13.3 软件与硬件检测"></a>13.3 软件与硬件检测</h3><ol start="2">
<li>浏览器元数据<ul>
<li>Geolocation API：查询宿主系统并尽可能精确地返回设备的位置信息</li>
<li>Connection State：通过navigator.onLine属性来确定浏览器的联网状态</li>
<li>NetworkInformation API：同上面一样，用来确定浏览器联网状态，通过navigator.connection属性使用</li>
<li>navigator.hardwareConcurrency：返回浏览器支持的逻辑处理器核心数量</li>
<li>navigator.deviceMemory：返回设备大致的系统内存大小</li>
</ul>
</li>
</ol>
<h2 id="第十四章-DOM"><a href="#第十四章-DOM" class="headerlink" title="第十四章 DOM"></a>第十四章 DOM</h2><ol>
<li><p>nodeType属性用来区分不同类型的节点</p>
<ul>
<li>值为1：元素节点</li>
<li>值为3：文本节点</li>
<li>值为9：Document节点</li>
</ul>
</li>
<li><p>访问元素节点常用方法</p>
<ul>
<li>document.getElementById()：通过id得到元素</li>
<li>document.getElementsByTagName()：通过标签名得到元素数组</li>
<li>document.getElementsByClassName()：通过类名得到元素数组</li>
<li>document.querySelector()：通过选择器得到元素</li>
<li>document.querySelectorAll()：通过选择器得到元素数组<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>123<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;spec&quot;</span>&gt;</span>456<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>789<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> box1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box1&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> spec = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;spec&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> p = box1.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;p&#x27;</span>);           <span class="comment">// [p, p.spec, p]</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> theP = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#box1 .spec&#x27;</span>); <span class="comment">// &lt;p class=&quot;spec&quot;&gt;456&lt;/p&gt;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> thePAll = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#box1 p&#x27;</span>); </span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(thePAll[<span class="number">2</span>]);  <span class="comment">// &lt;p&gt;789&lt;/p&gt;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>节点关系</p>
<ul>
<li>parentNode：父节点</li>
<li>children：子节点</li>
<li>firstElementChild：第一个子节点</li>
<li>lastElementChild：最后一个子节点</li>
<li>previousElementSibling：上一个兄弟节点</li>
<li>nextElementSibling：下一个兄弟节点<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>123<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;spec&quot;</span>&gt;</span>456<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>789<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> box1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box1&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> spec = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;spec&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(box1.<span class="property">children</span>);                <span class="comment">// [p, p.spec, p]</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(box1.<span class="property">firstElementChild</span>);       <span class="comment">// &lt;p&gt;123&lt;/p&gt;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(box1.<span class="property">lastElementChild</span>);        <span class="comment">// &lt;p&gt;789&lt;/p&gt;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(spec.<span class="property">previousElementSibling</span>);  <span class="comment">// &lt;p&gt;123&lt;/p&gt;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(spec.<span class="property">nextElementSibling</span>);      <span class="comment">// &lt;p&gt;789&lt;/p&gt;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>改变元素节点中的内容</p>
<ul>
<li>innerHTML：以HTML语法设置节点中的内容</li>
<li>innerText：以纯文本形式设置节点中的内容<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  let box1 = document.getElementById(&#x27;box1&#x27;);</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  let box2 = document.getElementById(&#x27;box2&#x27;);</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  box1.innerHTML = &#x27;<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span>咖啡<span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span>牛奶<span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span>&#x27;;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  box2.innerText = &#x27;<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span>咖啡<span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span>牛奶<span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span>&#x27;;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>改变元素节点的CSS样式</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span>&gt;</span>123<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;www.baidu.com&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/1.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;不存在的图片&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pic&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> box1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box1&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> pic = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;pic&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> link = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;link&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  box1.<span class="property">style</span>.<span class="property">bacgroudColor</span> = <span class="string">&#x27;red&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">  box1.<span class="property">style</span>.<span class="property">bacgroudImage</span> = <span class="string">&#x27;url(images/2.jpg)&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">  box1.<span class="property">style</span>.<span class="property">fontSize</span> = <span class="string">&#x27;32px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 修改图片路径</span></span></span><br><span class="line"><span class="language-javascript">  pic.<span class="property">src</span> = <span class="string">&#x27;images/3.jpg&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 修改跳转链接</span></span></span><br><span class="line"><span class="language-javascript">  link.<span class="property">href</span> = <span class="string">&#x27;diyulan.me&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>自定义属性</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> box1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box1&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  box1.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-n&#x27;</span>, <span class="number">10</span>);    <span class="comment">// &lt;div id=&quot;box1&quot; data-n=&quot;10&quot;&gt;&lt;/div&gt;</span></span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> getDIY = box1.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-n&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(getDIY);    <span class="comment">// 10</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建节点和移动节点</p>
<ul>
<li>document.createElement()：创建tagname的HTML元素，并没有挂载到DOM树上</li>
<li>appendChild()：可以将createElement()挂载到父节点内，成为父节点的最后一个子节点</li>
<li>insertBefore()：可以将createElement()挂载到父节点内，第二个参数决定挂载位置<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是段落0<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;move1&quot;</span>&gt;</span>我是段落1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;move2&quot;</span>&gt;</span>我是段落2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box2&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是老油条<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> box1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box1&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> box2 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box2&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> moveP1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;move1&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> moveP2 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;move2&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> ps1 = box1.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;p&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> ps2 = box2.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;p&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 创建节点</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> createP1 = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;p&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> createP2 = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;p&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  createP1.<span class="property">innerText</span> = <span class="string">&#x27;我是新来的&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">  createP2.<span class="property">innerText</span> = <span class="string">&#x27;我喜欢当第一&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 挂载节点</span></span></span><br><span class="line"><span class="language-javascript">  box1.<span class="title function_">appendChild</span>(createP1);</span></span><br><span class="line"><span class="language-javascript">  box1.<span class="title function_">insertBefore</span>(createP2, ps1[<span class="number">0</span>]);</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 移动节点</span></span></span><br><span class="line"><span class="language-javascript">  box2.<span class="title function_">appendChild</span>(moveP1);</span></span><br><span class="line"><span class="language-javascript">  box2.<span class="title function_">insertBefore</span>(moveP2, ps2[<span class="number">0</span>]);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>克隆节点：参数是一个布尔值，表示是否深克隆，如果为true则节点的所有后代节点都会克隆，如果为false则只克隆节点本身</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>咖啡<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>牛奶<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>可乐<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> box1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box1&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> box2 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box2&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// ul是一个类数组，就算只有一个ul标签也要写[0]</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> theUl = box1.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;ul&#x27;</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 克隆节点，并添加到box2</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> newUl = theUl.<span class="title function_">cloneNode</span>(<span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">  box2.<span class="title function_">appendChild</span>(newUl);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>删除节点：只能由父元素来删除子节点</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;delete&quot;</span>&gt;</span>123<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> box1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box1&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> delP = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;delete&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  box1.<span class="title function_">removeChild</span>(delP);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="第十五章-DOM扩展"><a href="#第十五章-DOM扩展" class="headerlink" title="第十五章 DOM扩展"></a>第十五章 DOM扩展</h2><h3 id="15-1-Selectors-API"><a href="#15-1-Selectors-API" class="headerlink" title="15.1 Selectors API"></a>15.1 Selectors API</h3><ol>
<li>matches()：接收一个CSS选择符参数，如果元素匹配返回true，否则返回false</li>
</ol>
<h3 id="15-3-HTML5"><a href="#15-3-HTML5" class="headerlink" title="15.3 HTML5"></a>15.3 HTML5</h3><ol start="2">
<li>推荐id选择器负责JS，class选择器负责CSS<ul>
<li>classList.add()：class选择器内添加值</li>
<li>classList.remove()：class选择器内删除值<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  let box1 = document.getElementById(&#x27;box1&#x27;);</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  box1.classList.add(&#x27;hi&#x27;);         // <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;hi&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  box1.classList.add(&#x27;hello&#x27;);      // <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;hi hello&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  box1.classList.remove(&#x27;hi&#x27;);      // <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;hello&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h2 id="第十六章-DOM2和DOM3"><a href="#第十六章-DOM2和DOM3" class="headerlink" title="第十六章 DOM2和DOM3"></a>第十六章 DOM2和DOM3</h2><h3 id="16-2-样式"><a href="#16-2-样式" class="headerlink" title="16.2 样式"></a>16.2 样式</h3><ol>
<li>CSS属性名使用连字符表示法；JS中这些属性必须转换为驼峰大小写形式</li>
</ol>
<table>
<thead>
<tr>
<th>CSS属性</th>
<th>JS属性</th>
</tr>
</thead>
<tbody><tr>
<td>background-image</td>
<td>style.backgroundImage</td>
</tr>
<tr>
<td>color</td>
<td>style.color</td>
</tr>
<tr>
<td>display</td>
<td>style.display</td>
</tr>
<tr>
<td>font-family</td>
<td>style.fontFamily</td>
</tr>
</tbody></table>
<h2 id="第十七章-事件"><a href="#第十七章-事件" class="headerlink" title="第十七章 事件"></a>第十七章 事件</h2><h3 id="17-1-事件流"><a href="#17-1-事件流" class="headerlink" title="17.1 事件流"></a>17.1 事件流</h3><ol>
<li>事件冒泡：从最具体的元素(文档树中最深的节点)开始触发，然后向上传播至没有那么具体的元素(文档)</li>
<li>事件捕获：最不具体的节点应该最先收到事件，而最具体的节点应该最后收到事件</li>
<li>DOM事件流分3个阶段：事件捕获、到达目标和事件冒泡</li>
</ol>
<h3 id="17-2-事件处理程序"><a href="#17-2-事件处理程序" class="headerlink" title="17.2 事件处理程序"></a>17.2 事件处理程序</h3><ol start="4">
<li><p>事件处理程序：用户或浏览器执行的某种动作，比如单击、加载、鼠标悬停等事件，为响应事件而调用相关函数；事件处理程序的名字以”on”开头</p>
</li>
<li><p>DOM0事件处理程序，以这种方式添加的事件处理程序会在事件流的冒泡阶段被处理</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 绑定事件处理函数</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myBtn&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">id</span>);  <span class="comment">// &quot;myBtn&quot;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 移除事件处理函数</span></span></span><br><span class="line"><span class="language-javascript">  btn.<span class="property">onclick</span> = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>DOM2事件处理程序</p>
<ul>
<li>addEventListener()：接收3个参数：事件名、事件处理函数和一个布尔值，true表示在捕获阶段调用事件处理程序，false(默认值)表示在冒泡阶段调用事件处理程序</li>
<li>removeEventListener()：通过addEventListener()添加的事件处理程序只能使用removeEventListener()来移除；addEventListener()添加的匿名函数无法移除<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myBtn&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  btn.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">id</span>); <span class="comment">// &quot;myBtn&quot;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 多个事件处理程序以添加顺序来触发</span></span></span><br><span class="line"><span class="language-javascript">  btn.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello world!&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>IE事件处理程序，以这种方式添加的事件处理程序会在事件流的冒泡阶段被处理</p>
<ul>
<li>attachEvent()和detachEvent()：这两个方法接收两个同样的参数：事件处理程序的名字和事件处理函数<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myBtn&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  btn.<span class="title function_">attachEvent</span>(<span class="string">&quot;onclick&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span> === <span class="variable language_">window</span>);   <span class="comment">// true</span></span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h3 id="17-3-事件对象"><a href="#17-3-事件对象" class="headerlink" title="17.3 事件对象"></a>17.3 事件对象</h3><ol start="8">
<li>在DOM中发生事件时，所有相关信息都会被收集并存储在一个名为event的对象中。这个对象包含了一些基本信息，比如导致事件的元素、发生的事件类型，以及可能与特定事件相关的任何其他数据</li>
<li>属性方法<ul>
<li>bubbles：表示事件是否冒泡</li>
<li>cancelable：表示是否可以取消事件的默认行为</li>
<li>currentTarget：当前事件处理程序所在的元素</li>
<li>defaultPrevented：true表示已经调用preventDefault()方法(DOM3Events中新增)</li>
<li>detail：事件相关的其他信息</li>
<li>eventPhase：表示调用事件处理程序的阶段：1代表捕获阶段，2代表到达目标，3代表冒泡阶段</li>
<li>preventDefault()：用于取消事件的默认行为。只有cancelable为true才可以调用这个方法</li>
<li>stopImmediatePropagation()：用于取消所有后续事件捕获或事件冒泡，并阻止调用任何后续事件处理程序(DOM3Events中新增)</li>
<li>stopPropagation()：用于取消所有后续事件捕获或事件冒泡。只有bubbles为true才可以调用这个方法</li>
<li>target：事件目标</li>
<li>trusted：true表示事件是由浏览器生成的。false表示事件是开发者通过JavaScript创建的(DOM3Events中新增)</li>
<li>type：被触发的事件类型</li>
<li>View：与事件相关的抽象视图。等于事件所发生的window对象</li>
</ul>
</li>
</ol>
<h3 id="17-4-事件类型"><a href="#17-4-事件类型" class="headerlink" title="17.4 事件类型"></a>17.4 事件类型</h3><ol start="10">
<li>DOM3事件类型：用户界面事件、焦点事件、鼠标事件、滚轮事件、输入事件、键盘事件、合成事件</li>
</ol>
<h3 id="17-5-内存与性能"><a href="#17-5-内存与性能" class="headerlink" title="17.5 内存与性能"></a>17.5 内存与性能</h3><ol start="11">
<li>事件委托：可利用事件冒泡，只使用一个事件处理程序来管理一种类型的事件<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;myLinks&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;goGithub&quot;</span>&gt;</span>去GitHub社区<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;doSomething&quot;</span>&gt;</span>做点什么<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;sayName&quot;</span>&gt;</span>说名字<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> list = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myLinks&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  list.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> target = event.<span class="property">target</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">switch</span>(target.<span class="property">id</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">case</span> <span class="string">&quot;goGithub&quot;</span>:</span></span><br><span class="line"><span class="language-javascript">        location.<span class="property">href</span> = <span class="string">&quot;https://github.com&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">case</span> <span class="string">&quot;doSomething&quot;</span>:</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&quot;我更改了文档的标题&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">case</span> <span class="string">&quot;sayName&quot;</span>:</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;幽蓝&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125; &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="17-6-模拟事件"><a href="#17-6-模拟事件" class="headerlink" title="17.6 模拟事件"></a>17.6 模拟事件</h3><ol start="12">
<li>创建模拟事件：document.createEvent()方法创建一个event对象，参数接收一个创建事件类型的字符串</li>
<li>模拟鼠标事件：initMouseEvent()方法，用于为新对象指定鼠标的特定信息</li>
<li>模拟键盘事件：initKeyboardEvent()方法，用于为新对象指定键盘的特定信息</li>
<li>模拟其他事件：initEvent()方法</li>
</ol>
<h2 id="第十八章-动画与Canvas图形"><a href="#第十八章-动画与Canvas图形" class="headerlink" title="第十八章 动画与Canvas图形"></a>第十八章 动画与Canvas图形</h2><h3 id="18-1-使用requestAnimationFrame"><a href="#18-1-使用requestAnimationFrame" class="headerlink" title="18.1 使用requestAnimationFrame"></a>18.1 使用requestAnimationFrame</h3><ol>
<li>requestAnimationFrame()：告诉浏览器要执行动画了，浏览器可以通过最优方式确定重绘的时序</li>
<li>cancelAnimationFrame()：取消重绘任务<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> requestID = <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(<span class="function">()=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Repaint!&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="title function_">cancelAnimationFrame</span>(requestID);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="18-2-基本的画布功能"><a href="#18-2-基本的画布功能" class="headerlink" title="18.2 基本的画布功能"></a>18.2 基本的画布功能</h3><ol start="3">
<li>canvas标签设置宽高，默认画布不可见<ul>
<li>getContext()：参数”2d”，表示获取2D上下文对象</li>
<li>toDataURL()：导出&lt;canvas&gt;元素上的图像</li>
<li>fillStyle：设置填充颜色</li>
<li>strokeStyle：设置边框颜色</li>
<li>fillRect：绘制一个填充的矩形</li>
<li>strokeRect：绘制一个边框的矩形</li>
<li>clearRect：设置透明像素擦除一个矩形区域<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;drawing&quot;</span> <span class="attr">width</span>=<span class="string">&quot;500px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> drawing = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;drawing&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> ctx = drawing.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  ctx.<span class="property">fillStyle</span> = <span class="string">&#x27;#95e1d3&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">  ctx.<span class="property">strokeStyle</span> = <span class="string">&#x27;#b83b5e&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">  ctx.<span class="title function_">fillRect</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">50</span>, <span class="number">50</span>);</span></span><br><span class="line"><span class="language-javascript">  ctx.<span class="title function_">strokeRect</span>(<span class="number">30</span>, <span class="number">30</span>, <span class="number">50</span>, <span class="number">50</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 擦除一个钜形区域</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// ctx.clearRect(10, 10, 50, 50);</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h3 id="18-3-2D绘图上下文"><a href="#18-3-2D绘图上下文" class="headerlink" title="18.3 2D绘图上下文"></a>18.3 2D绘图上下文</h3><ol start="4">
<li>绘制路径属性&#x2F;方法<ul>
<li>beginPath()：新建一条路径，生成之后，图形绘制命令被指向到路径上生成路径</li>
<li>closePath()：闭合路径之后图形绘制命令又重新指向到上下文中</li>
<li>stroke()：通过线条来绘制图形轮廓</li>
<li>fill()：通过填充路径的内容区域生成实心的图形</li>
<li>moveTo()：从一个点到另一个点的移动过程</li>
<li>lineTo()：绘制一条从当前位置到指定x以及y位置的直线</li>
<li>arc()：画一个以（x,y）为圆心的以radius为半径的圆弧（圆）</li>
</ul>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;drawing&quot;</span> <span class="attr">width</span>=<span class="string">&quot;500px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> drawing = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;drawing&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> ctx = drawing.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 创建路径</span></span></span><br><span class="line"><span class="language-javascript">  ctx.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 绘制外圆</span></span></span><br><span class="line"><span class="language-javascript">  ctx.<span class="title function_">arc</span>(<span class="number">100</span>, <span class="number">100</span>, <span class="number">99</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 绘制内圆</span></span></span><br><span class="line"><span class="language-javascript">  ctx.<span class="title function_">moveTo</span>(<span class="number">194</span>, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">  ctx.<span class="title function_">arc</span>(<span class="number">100</span>, <span class="number">100</span>, <span class="number">94</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 绘制分针</span></span></span><br><span class="line"><span class="language-javascript">  ctx.<span class="title function_">moveTo</span>(<span class="number">100</span>, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">  ctx.<span class="title function_">lineTo</span>(<span class="number">100</span>, <span class="number">15</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 绘制时针</span></span></span><br><span class="line"><span class="language-javascript">  ctx.<span class="title function_">moveTo</span>(<span class="number">100</span>, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">  ctx.<span class="title function_">lineTo</span>(<span class="number">35</span>, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 描画路径</span></span></span><br><span class="line"><span class="language-javascript">  ctx.<span class="title function_">stroke</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="5">
<li>绘制文本：fillText()和strokeText()</li>
</ol>
<h3 id="18-4-WebGL"><a href="#18-4-WebGL" class="headerlink" title="18.4 WebGL"></a>18.4 WebGL</h3><ol start="6">
<li>WebGL是画布的3D上下文；WebGL2.0上下文的名字叫”webgl2”，WebGL1.0上下文的名字叫”webgl1”</li>
</ol>
<h2 id="第十九章-表单脚本"><a href="#第十九章-表单脚本" class="headerlink" title="第十九章 表单脚本"></a>第十九章 表单脚本</h2><h3 id="19-1-表单基础"><a href="#19-1-表单基础" class="headerlink" title="19.1 表单基础"></a>19.1 表单基础</h3><ol>
<li><p>preventDefault()：阻止表单提交</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> form = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myForm&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  form.<span class="title function_">addEventListener</span>(<span class="string">&quot;submit&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 阻止表单提交</span></span></span><br><span class="line"><span class="language-javascript">    event.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>表单字段：表单元素可以使用elements属性来访问，elements集合是一个有序列表，通过索引位置和name属性来访问</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;form1&quot;</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>点我提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;请输入内容&quot;</span> <span class="attr">name</span>=<span class="string">&quot;textbox1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> form = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;form1&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 取得表单中的第一个字段</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> field1 = form.<span class="property">elements</span>[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 取得表单中名为&quot;textbox1&quot;的字段</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> field2 = form.<span class="property">elements</span>[<span class="string">&quot;textbox1&quot;</span>];</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 取得字段的数量</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> fieldCount = form.<span class="property">elements</span>.<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(field1);      <span class="comment">// &lt;button type=&quot;submit&quot;&gt;点我提交&lt;/button&gt;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(field2);      <span class="comment">// &lt;input type=&quot;text&quot; value=&quot;请输入内容&quot; name=&quot;textbox1&quot;&gt;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(fieldCount);  <span class="comment">// 2，只计算表单功能的子标签，div标签不计算在内</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>表单字段的公共属性和方法</p>
<ul>
<li>disabled：布尔值，表示表单字段是否禁用</li>
<li>form：指针，指向表单字段所属的表单。这个属性是只读的</li>
<li>name：字符串，这个字段的名字</li>
<li>readOnly：布尔值，表示这个字段是否只读</li>
<li>tabIndex：数值，表示这个字段在按Tab键时的切换顺序</li>
<li>type：字符串，表示字段类型，如”checkbox”、”radio”等</li>
<li>value：要提交给服务器的字段值。对文件输入字段来说，这个属性是只读的，仅包含计算机上某个文件的路径<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;myForm&quot;</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;submit-btn&quot;</span>&gt;</span>点我提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 第一次点击之后禁用提交按钮。通过监听submit事件来实现</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 只有提交按钮才能触发submit事件</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> form = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;myForm&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  form.<span class="title function_">addEventListener</span>(<span class="string">&#x27;submit&#x27;</span>, <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> target = event.<span class="property">target</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 取得提交按钮</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> btn = target.<span class="property">elements</span>[<span class="string">&quot;submit-btn&quot;</span>];</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 禁用提交按钮</span></span></span><br><span class="line"><span class="language-javascript">    btn.<span class="property">disabled</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h3 id="19-2-文本框编程"><a href="#19-2-文本框编程" class="headerlink" title="19.2 文本框编程"></a>19.2 文本框编程</h3><ol start="4">
<li>屏蔽字符，只允许输入数字<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;myForm&quot;</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">  请输入数字：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;textbox&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> text = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;textbox&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  textbox.<span class="title function_">addEventListener</span>(<span class="string">&quot;keypress&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (!<span class="regexp">/\d/</span>.<span class="title function_">test</span>(<span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(event.<span class="property">charCode</span>)) &amp;&amp;</span></span><br><span class="line"><span class="language-javascript">      event.<span class="property">charCode</span> &gt; <span class="number">9</span> &amp;&amp;</span></span><br><span class="line"><span class="language-javascript">      !event.<span class="property">ctrlKey</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      event.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="第二十章-JavaScript-API"><a href="#第二十章-JavaScript-API" class="headerlink" title="第二十章 JavaScript API"></a>第二十章 JavaScript API</h2><ol>
<li>Atomics API：用于保护代码在多线程内存访问模式下不发生资源争用</li>
<li>postMessage() API：支持从不同源跨文档发送消息，同时保证安全和遵循同源策略</li>
<li>Encoding API：用于实现字符串与缓冲区之间的无缝转换(越来越常见的操作)</li>
<li>File API：提供了发送、接收和读取大型二进制对象的可靠工具</li>
<li>媒体元素<audio>和<video>拥有自己的API，用于操作音频和视频。并不是每个浏览器都会支持所有媒体格式，使用canPlayType()方法可以检测浏览器支持情况</li>
<li>拖放 API：支持方便地将元素标识为可拖动，并在操作系统完成放置时给出回应。可以利用它创建自定义可拖动元素和放置目标</li>
<li>Notifications API：提供了一种浏览器中立的方式，以此向用户展示消通知弹层</li>
<li>Streams API：支持以全新的方式读取、写入和处理数据</li>
<li>Timing API：提供了一组度量数据进出浏览器时间的可靠工具</li>
<li>Web Components API：为元素重用和封装技术向前迈进提供了有力支撑</li>
<li>Web Cryptography API：让生成随机数、加密和签名消息成为一类特性</li>
</ol>
<h2 id="第二十一章-错误处理与调试"><a href="#第二十一章-错误处理与调试" class="headerlink" title="第二十一章 错误处理与调试"></a>第二十一章 错误处理与调试</h2><h3 id="21-2-错误处理"><a href="#21-2-错误处理" class="headerlink" title="21.2 错误处理"></a>21.2 错误处理</h3><ol>
<li>错误类型<ul>
<li>InternalError类型的错误会在底层JavaScript引擎抛出异常时由浏览器抛出。例如，递归过多导致了栈溢出。这个类型并不是代码中通常要处理的错误，如果真发生了这种错误，很可能代码哪里弄错了或者有危险了</li>
<li>EvalError类型的错误会在使用eval()函数发生异常时抛出</li>
<li>RangeError错误会在数值越界时抛出</li>
<li>ReferenceError会在找不到对象时发生</li>
<li>SyntaxError经常在给eval()传入的字符串包含JavaScript语法错误时发生</li>
<li>TypeError主要发生在变量不是预期类型，或者访问不存在的方法时</li>
<li>URIError在使用encodeURI()或decodeURI()但传入了格式错误的URI时发生</li>
</ul>
</li>
<li>大多数情况下，最好使用严格相等(&#x3D;&#x3D;&#x3D;)和严格不相等(!&#x3D;&#x3D;)操作符来避免类型转换</li>
<li>使用 try&#x2F;catch 语句，可以通过更合适的方式对错误做出处理，避免浏览器处理</li>
</ol>
<h2 id="第二十二章-处理XML"><a href="#第二十二章-处理XML" class="headerlink" title="第二十二章 处理XML"></a>第二十二章 处理XML</h2><ol>
<li>DOMParser类型是简单的对象，可以将XML字符串解析为DOM文档</li>
<li>XMLSerializer类型执行相反操作，将DOM文档序列化为XML字符串</li>
<li>DOM Level 3新增了针对XPath API的规范。该API可以让JavaScript针对DOM文档执行任何XPath查询并得到不同数据类型的结果</li>
</ol>
<h2 id="第二十三章-JSON"><a href="#第二十三章-JSON" class="headerlink" title="第二十三章 JSON"></a>第二十三章 JSON</h2><h3 id="23-1-语法"><a href="#23-1-语法" class="headerlink" title="23.1 语法"></a>23.1 语法</h3><ol>
<li>JSON作为替代XML的一个方案提出，解决XML冗余和啰唆问题，JSON不属于JavaScript，它们只是拥有相同的语法</li>
<li>JSON支持3种类型的值<ul>
<li>简单值：字符串、数值、布尔值和null，特殊值undefined不可以</li>
<li>对象：第一种复杂数据类型，对象表示有序键&#x2F;值对。每个值可以是简单值，也可以是复杂类型</li>
<li>数组：第二种复杂数据类型，数组表示通过索引访问的有序列表。数组的值可以是任意类型</li>
</ul>
</li>
<li>JSON与JS区别：JSON字符串必须使用双引号；JSON没有变量、函数或对象实例的概念；JSON的所有记号都只表示结构化数据</li>
</ol>
<h3 id="23-2-解析与序列化"><a href="#23-2-解析与序列化" class="headerlink" title="23.2 解析与序列化"></a>23.2 解析与序列化</h3><ol start="4">
<li><p>JSON的优势：能解析成可用的JS对象，JS开发者可以非常方便地使用JSON数据</p>
</li>
<li><p>JSON对象有两个方法：stringify()和parse()</p>
<ul>
<li>JSON.stringify()：能把JavaScript序列化为JSON字符串；值为undefined的任何属性也会被跳过</li>
<li>JSON.parse()：能把JSON解析为原生JavaScript值；新对象接收解析的值与原对象不是同一个引用<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> book = &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&quot;Professional JavaScript&quot;</span>,</span><br><span class="line">  <span class="attr">authors</span>: [</span><br><span class="line">    <span class="string">&quot;Nicholas C. Zakas&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Matt Frisbie&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">edition</span>: <span class="number">4</span>,</span><br><span class="line">  <span class="attr">year</span>: <span class="number">2017</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> jsonText = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(book);</span><br><span class="line"><span class="comment">// &#123;&quot;title&quot;:&quot;Professional JavaScript&quot;,&quot;authors&quot;:[&quot;Nicholas C. Zakas&quot;,&quot;Matt Frisbie&quot;],&quot;edition&quot;:4,&quot;year&quot;:2017&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> bookCopy = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(jsonText);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(book === bookCopy); <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>过滤结果：JSON.stringify()第二个参数缩进想要的JSON字符串；如果第二参数是函数，还能修改值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> jsonText = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(book, [<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;edition&#x27;</span>]);</span><br><span class="line"><span class="comment">// &#123;&quot;title&quot;:&quot;Professional JavaScript&quot;,&quot;edition&quot;:4&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> jsonText1 = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(book, <span class="function">(<span class="params">key, value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (key) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;authors&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> value.<span class="title function_">join</span>(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;year&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="number">5000</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;edition&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// &#123;&quot;title&quot;:&quot;Professional JavaScript&quot;,&quot;authors&quot;:&quot;Nicholas C. Zakas,Matt Frisbie&quot;,&quot;year&quot;:5000&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>字符串索引：JSON.stringify()第三个参数控制缩进和空格</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 每级缩进4个空格</span></span><br><span class="line"><span class="keyword">let</span> jsonText = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(book, <span class="literal">null</span>, <span class="number">4</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(jsonText);</span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//     &quot;title&quot;: &quot;Professional JavaScript&quot;,</span></span><br><span class="line"><span class="comment">//     &quot;authors&quot;: [</span></span><br><span class="line"><span class="comment">//         &quot;Nicholas C. Zakas&quot;,</span></span><br><span class="line"><span class="comment">//         &quot;Matt Frisbie&quot;</span></span><br><span class="line"><span class="comment">//     ],</span></span><br><span class="line"><span class="comment">//     &quot;edition&quot;: 4,</span></span><br><span class="line"><span class="comment">//     &quot;year&quot;: 2017</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="第二十四章-网络请求与远程资源"><a href="#第二十四章-网络请求与远程资源" class="headerlink" title="第二十四章 网络请求与远程资源"></a>第二十四章 网络请求与远程资源</h2><h3 id="24-1-XMLHttpRequest对象"><a href="#24-1-XMLHttpRequest对象" class="headerlink" title="24.1 XMLHttpRequest对象"></a>24.1 XMLHttpRequest对象</h3><ol>
<li><p>创建XHR对象<code>let xhr = new XMLHttpRequest();</code></p>
<ul>
<li>open()：启动一个请求以备发送；3个参数：请求类型(“get”、”post”等)、请求URL、请求是否异步的布尔值；不会真正发送请求</li>
<li>send()：发送请求；1个参数：发送的数据；不需要发送数据则必须传入null</li>
</ul>
</li>
<li><p>XHR对象的属性</p>
<ul>
<li>responseText：作为响应体返回的文本</li>
<li>responseXML：如果响应的内容类型是”text&#x2F;xml”或”application&#x2F;xml”，那就是包含响应数据的XML DOM文档</li>
<li>status：响应的HTTP状态</li>
<li>statusText：响应的HTTP状态描述</li>
</ul>
</li>
<li><p>HTTP状态码</p>
<ul>
<li>2xx，表示成功</li>
<li>304，表示资源未修改过，是从浏览器缓存中直接拿取的</li>
</ul>
</li>
<li><p>readyState属性</p>
<ul>
<li>0：未初始化</li>
<li>1：启动，已调用open()</li>
<li>2：发送，已调用send()</li>
<li>3：接收到部分响应数据</li>
<li>4：接收到全部响应数据</li>
<li>readystatechange事件：readystate属性的值由一个值变成另一个值，都会触发readystatechange事件</li>
<li>onreadystatechange事件处理程序不会收到event对象<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> ((xhr.<span class="property">status</span> &gt;= <span class="number">200</span> &amp;&amp; xhr.<span class="property">status</span> &lt; <span class="number">300</span>) || xhr.<span class="property">status</span> === <span class="number">304</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">responseText</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Request was unsuccessful: &quot;</span> + xhr.<span class="property">status</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&quot;get&quot;</span>, <span class="string">&quot;example.txt&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">xhr.<span class="title function_">send</span>(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>XHR请求</p>
<ul>
<li>setRequestHeader()：发送额外的请求头部；接收两个参数：头部字段的名称和值；必须在open()之后、send()之前调用setRequestHeader()</li>
<li>getResponseHeader()：从XHR对象获取响应头部；传入要获取头部的名称</li>
<li>getAllResponseHeaders()：返回字符串，通过解析头部字段的输出，可以知道服务器发送的所有头部</li>
<li>GET请求：向服务器查询某些信息</li>
<li>POST请求：向服务器发送应该保存的数据</li>
</ul>
</li>
</ol>
<h3 id="24-3-跨源资源共享"><a href="#24-3-跨源资源共享" class="headerlink" title="24.3 跨源资源共享"></a>24.3 跨源资源共享</h3><ol start="6">
<li>CORS：使用自定义的HTTP头部允许浏览器和服务器相互了解，以确实请求或响应应该成功还是失败</li>
</ol>
<h3 id="24-4-替代性跨源技术"><a href="#24-4-替代性跨源技术" class="headerlink" title="24.4 替代性跨源技术"></a>24.4 替代性跨源技术</h3><ol start="7">
<li><p>图像Ping：只能发送GET请求；无法访问服务器的响应文本</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">img.<span class="property">onload</span> = img.<span class="property">onerror</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Done!&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">img.<span class="property">src</span> = <span class="string">&quot;http://www.example.com/test?name=Nicholas&quot;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>JSONP：两部分组成回调函数和数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">handleResponse</span>(<span class="params">response</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`</span></span><br><span class="line"><span class="string">          You&#x27;re at IP address <span class="subst">$&#123;response.ip&#125;</span>, which is in</span></span><br><span class="line"><span class="string">          <span class="subst">$&#123;response.city&#125;</span>, <span class="subst">$&#123;response.region_name&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>);</span><br><span class="line">script.<span class="property">src</span> = <span class="string">&quot;http://freegeoip.net/json/?callback=handleResponse&quot;</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">insertBefore</span>(script, <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">firstChild</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>Fetch API是作为对XHR对象的一种端到端的替代方案而提出的。这个API提供了优秀的基于期约的结构、更直观的接口，以及对Stream API的最好支持</p>
</li>
<li><p>Web Socket是与服务器的全双工、双向通信渠道。与其他方案不同，Web Socket不使用HTTP，而使用了自定义协议，目的是更快地发送小数据块。这需要专用的服务器，但速度优势明显</p>
</li>
</ol>
<h2 id="第二十五章-客户端存储"><a href="#第二十五章-客户端存储" class="headerlink" title="第二十五章 客户端存储"></a>第二十五章 客户端存储</h2><h3 id="25-1-cookie"><a href="#25-1-cookie" class="headerlink" title="25.1 cookie"></a>25.1 cookie</h3><ol>
<li>每个浏览器限制cookie的数量不同，超过上限浏览器会删除之前设置的cookie<ul>
<li>每个域不超过20个cookie</li>
<li>每个域不超过81920字节</li>
<li>单个cookie不超过4096字节</li>
</ul>
</li>
<li>cookie的构成<ul>
<li>名称：cookie名不区分大小写，但服务器软件可能会区分大小写</li>
<li>值：存储在cookie里的字符串值。这个值必须经过URL编码</li>
<li>域：cookie有效的域</li>
<li>路径：请求URL中包含这个路径才会把cookie发送到服务器</li>
<li>过期时间：表示何时删除cookie的时间戳；默认浏览器会话结束后删除所有cookie</li>
<li>安全标志：设置之后，只在使用SSL安全连接的情况下才会把cookie发送到服务器</li>
</ul>
</li>
<li>cookie的使用<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建cookie</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&#x27;name=ulan&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 名或值非英文，写入时需要encodeURIComponent()编码，读取时decodeURIComponent()解码</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">`username=<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(<span class="string">&#x27;幽蓝&#x27;</span>)&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 过期时间，默认会话时间指关闭浏览器消失</span></span><br><span class="line"><span class="comment">// expires，值为Data类型，可以指定过期时间</span></span><br><span class="line"><span class="comment">// max-age，值为数字，表示当前时间多少秒后过期，单位是秒</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">`age=9; expires=<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>(</span></span></span><br><span class="line"><span class="subst"><span class="string">  <span class="string">&#x27;2099-01-01 00:00:00&#x27;</span></span></span></span><br><span class="line"><span class="subst"><span class="string">)&#125;</span>`</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&#x27;job=softwareEngineer; max-age=5&#x27;</span>;  <span class="comment">// 5秒后过期</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">`job=softwareEngineer; max-age=<span class="subst">$&#123;<span class="number">24</span> * <span class="number">3600</span> * <span class="number">7</span>&#125;</span>`</span>;  <span class="comment">// 7天后过期</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除cookie</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&#x27;name=ulan; max-age=0&#x27;</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="25-2-Web-Storage"><a href="#25-2-Web-Storage" class="headerlink" title="25.2 Web Storage"></a>25.2 Web Storage</h3><ol start="4">
<li>Web Storage解决通过客户端存储不需要频繁发送回服务器的数据时使用cookie的问题；localStorage永久存储机制，sessionStorage是跨会话的存储机制</li>
<li>Storage的实例方法<ul>
<li>setItem(name, value)：设置给定name的值</li>
<li>getItem(name)：取得给定name的值，不存在返回null</li>
<li>removeItem(name)：删除给定name的名&#x2F;值对</li>
<li>clear()：删除所有值</li>
<li>key(index)：取得给定数值位置的名称<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建</span></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;ulan&#x27;</span>);</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;19&#x27;</span>);</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;job&#x27;</span>, <span class="string">&#x27;softwareEngineer&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;username&#x27;</span>));  <span class="comment">// ulan</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;friend&#x27;</span>));  <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除job</span></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;job&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">localStorage</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全删除</span></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">clear</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">localStorage</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// sessionStorage使用基本一样</span></span><br><span class="line">sessionStorage.<span class="title function_">setItem</span>(<span class="string">&#x27;friend&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">sessionStorage.<span class="title function_">getItem</span>(<span class="string">&#x27;friend&#x27;</span>);</span><br><span class="line">sessionStorage.<span class="title function_">removeItem</span>(<span class="string">&#x27;friend&#x27;</span>);</span><br><span class="line">sessionStorage.<span class="title function_">clear</span>();</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h3 id="25-3-IndexedDB"><a href="#25-3-IndexedDB" class="headerlink" title="25.3 IndexedDB"></a>25.3 IndexedDB</h3><ol start="6">
<li>IndexedDB是类似于SQL数据库的结构化数据存储机制。不同的是，IndexedDB存储的是对象，而不是数据表。对象存储是通过定义键然后添加数据来创建的。游标用于查询对象存储中的特定数据，而索引可以针对特定属性实现更快的查询</li>
</ol>
<h2 id="第二十六章-模块"><a href="#第二十六章-模块" class="headerlink" title="第二十六章 模块"></a>第二十六章 模块</h2><h3 id="26-1-理解模块模式"><a href="#26-1-理解模块模式" class="headerlink" title="26.1 理解模块模式"></a>26.1 理解模块模式</h3><ol>
<li>按逻辑分块，各自封装，相互独立，每个块自行决定对外暴露什么，同时自行决定引入执行哪些外部代码</li>
</ol>
<h3 id="26-4-使用ES6模块"><a href="#26-4-使用ES6模块" class="headerlink" title="26.4 使用ES6模块"></a>26.4 使用ES6模块</h3><ol start="2">
<li>导出与导入</li>
</ol>
<ul>
<li>demo.js文件<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123;age, fn, p&#125;;</span><br><span class="line"><span class="keyword">const</span> age = <span class="number">9</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> p = &#123;<span class="attr">name</span>: <span class="string">&#x27;幽蓝&#x27;</span>&#125;;</span><br></pre></td></tr></table></figure></li>
<li>第一种导入方式，导入部分内容<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;age&#125; <span class="keyword">from</span> <span class="string">&#x27;./demo.js&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(age);  <span class="comment">// 9</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>第二种导入方式，导入全部内容，按对象方式来访问<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> * <span class="keyword">as</span> obj <span class="keyword">from</span> <span class="string">&#x27;./demo.js&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">age</span>); <span class="comment">// 9</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">p</span>.<span class="property">name</span>); <span class="comment">// 幽蓝</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="第二十七章-工作者线程"><a href="#第二十七章-工作者线程" class="headerlink" title="第二十七章 工作者线程"></a>第二十七章 工作者线程</h2><h3 id="27-1-工作者线程简介"><a href="#27-1-工作者线程简介" class="headerlink" title="27.1 工作者线程简介"></a>27.1 工作者线程简介</h3><ol>
<li>工作者线程的价值所在：允许把主线程的工作转嫁给独立的实体，而不会改变现有的单线程模型</li>
<li>JavaScript环境实际上是运行在托管操作系统中的虚拟环境。在浏览器中每打开一个页面，就会分配一个它自己的环境；使用工作者线程，浏览器可以在原始页面环境之外再分配一个完全独立的二级子环境。这个子环境不能与依赖单线程交互的API（如DOM）互操作，但可以与父环境并行执行代码</li>
<li>主要的工作者线程：专用工作者线程、共享工作者线程和服务工作者线程</li>
</ol>
<h3 id="27-2-专用工作者线程"><a href="#27-2-专用工作者线程" class="headerlink" title="27.2 专用工作者线程"></a>27.2 专用工作者线程</h3><ol start="4">
<li><p>worker实例化</p>
<ul>
<li>比如下方html是父环境，多线程计算3次斐波那契数列，可能需要3秒；单线程计算3次斐波那契数列，可能需要9秒<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> worker1 = <span class="keyword">new</span> <span class="title class_">Worker</span>(<span class="string">&#x27;demo1.js&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> worker2 = <span class="keyword">new</span> <span class="title class_">Worker</span>(<span class="string">&#x27;demo2.js&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> worker3 = <span class="keyword">new</span> <span class="title class_">Worker</span>(<span class="string">&#x27;demo3.js&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  worker1.<span class="property">onmessage</span> = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  worker2.<span class="property">onmessage</span> = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  worker3.<span class="property">onmessage</span> = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// fb执行时间: 2616.596923828125 ms</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// worker2</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// fb执行时间: 2623.839111328125 ms</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// worker1</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// fb执行时间: 2625.576904296875 ms</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// worker3</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>demo1.js<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 斐波那契数列，当成是相当耗时的函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fb</span>(<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span> || n === <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">fb</span>(n - <span class="number">1</span>) + <span class="title function_">fb</span>(n - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="string">&#x27;fb执行时间1&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">fb</span>(<span class="number">43</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="string">&#x27;fb执行时间1&#x27;</span>);</span><br><span class="line">self.<span class="title function_">postMessage</span>(<span class="string">&#x27;worker1&#x27;</span>);</span><br></pre></td></tr></table></figure></li>
<li>demo2.js<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 斐波那契数列，当成是相当耗时的函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fb</span>(<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span> || n === <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">fb</span>(n - <span class="number">1</span>) + <span class="title function_">fb</span>(n - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="string">&#x27;fb执行时间2&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">fb</span>(<span class="number">43</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="string">&#x27;fb执行时间2&#x27;</span>);</span><br><span class="line">self.<span class="title function_">postMessage</span>(<span class="string">&#x27;worker2&#x27;</span>);</span><br></pre></td></tr></table></figure></li>
<li>demo3.js<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 斐波那契数列，当成是相当耗时的函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fb</span>(<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span> || n === <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">fb</span>(n - <span class="number">1</span>) + <span class="title function_">fb</span>(n - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="string">&#x27;fb执行时间3&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">fb</span>(<span class="number">43</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="string">&#x27;fb执行时间3&#x27;</span>);</span><br><span class="line">self.<span class="title function_">postMessage</span>(<span class="string">&#x27;worker3&#x27;</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Worker对象支持的事件处理程序属性</p>
<ul>
<li>onerror：在工作者线程中发生ErrorEvent类型的错误事件时会调用指定给该属性的处理程序</li>
<li>onmessage：在工作者线程中发生MessageEvent类型的消息事件时会调用指定给该属性的处理程序</li>
<li>onmessageerror：在工作者线程中发生MessageEvent类型的错误事件时会调用指定给该属性的处理程序</li>
<li>postMessage()：用于通过异步消息事件向工作者线程发送信息</li>
<li>terminate()：用于立即终止工作者线程。没有为工作者线程提供清理的机会，脚本会突然停止</li>
</ul>
</li>
</ol>
<h3 id="27-5-小结"><a href="#27-5-小结" class="headerlink" title="27.5 小结"></a>27.5 小结</h3><ol start="6">
<li>工作者线程可以运行异步JavaScript而不阻塞用户界面。这非常适合复杂计算和数据处理，特别是需要花较长时间因而会影响用户使用网页的处理任务。工作者线程有自己独立的环境，只能通过异步消息与外界通信</li>
<li>工作者线程可以是专用线程、共享线程。专用线程只能由一个页面使用，而共享线程则可以由同源的任意页面共享</li>
<li>服务工作者线程用于让网页模拟原生应用程序。服务工作者线程也是一种工作者线程，但它们更像是网络代理，而非独立的浏览器线程。可以把它们看成是高度定制化的网络缓存，它们也可以在PWA中支持推送通知</li>
</ol>
<h2 id="第二十八章-最佳实践"><a href="#第二十八章-最佳实践" class="headerlink" title="第二十八章 最佳实践"></a>第二十八章 最佳实践</h2><ol>
<li>可维护性与可读性，不同团队有不同开发规范，入乡随俗</li>
<li>不要修改不属于你的对象。只有你自己创建的才是你的对象，包括自定义类型和对象字面量</li>
<li>优化代码，先能走在考虑怎么跑吧？</li>
</ol>
</article><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/img/cover_jsNotes.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/reward_wechat.webp" target="_blank"><img class="post-qr-code-img" src="/img/reward_wechat.webp" alt="微信扫一扫"/></a><div class="post-qr-code-desc">微信扫一扫</div></li><li class="reward-item"><a href="/img/reward_alipay.webp" target="_blank"><img class="post-qr-code-img" src="/img/reward_alipay.webp" alt="支付宝扫一扫"/></a><div class="post-qr-code-desc">支付宝扫一扫</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/archives/7a37d2a6.html"><img class="prev-cover" src="/img/content_baXiangMountain.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">八乡山之旅</div></div></a></div><div class="next-post pull-right"><a href="/archives/284b2c05.html"><img class="next-cover" src="/img/cover_freecodecamp.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">freecodecamp练习</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="lv-container" data-id="city" data-uid="MTAyMC81NTk5My8zMjQ1Ng=="></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">第一章 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-JavaScript%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.1.</span> <span class="toc-text">1.2 JavaScript实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-HTML%E4%B8%AD%E7%9A%84JavaScript"><span class="toc-number">2.</span> <span class="toc-text">第二章 HTML中的JavaScript</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-Script%E5%85%83%E7%B4%A0"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 Script元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E6%96%87%E6%A1%A3%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.2.</span> <span class="toc-text">2.3 文档模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80"><span class="toc-number">3.</span> <span class="toc-text">第三章 语言基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E8%AF%AD%E6%B3%95"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%8F%98%E9%87%8F"><span class="toc-number">3.2.</span> <span class="toc-text">3.3 变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.3.</span> <span class="toc-text">3.4 数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">3.4.</span> <span class="toc-text">3.5 操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-%E8%AF%AD%E5%8F%A5"><span class="toc-number">3.5.</span> <span class="toc-text">3.6 语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-%E5%87%BD%E6%95%B0"><span class="toc-number">3.6.</span> <span class="toc-text">3.7 函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E5%8F%98%E9%87%8F%E3%80%81%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E5%86%85%E5%AD%98"><span class="toc-number">4.</span> <span class="toc-text">第四章 变量、作用域与内存</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%8E%9F%E5%A7%8B%E5%80%BC%E4%B8%8E%E5%BC%95%E7%94%A8%E5%80%BC"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 原始值与引用值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E4%B8%8E%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 执行上下文与作用域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 垃圾回收</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-%E5%9F%BA%E6%9C%AC%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.</span> <span class="toc-text">第五章 基本引用类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-Date"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 Date</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-RegExp"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 RegExp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E5%8E%9F%E5%A7%8B%E5%80%BC%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 原始值包装类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-%E5%8D%95%E4%BE%8B%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="toc-number">5.4.</span> <span class="toc-text">5.4 单例内置对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0-%E9%9B%86%E5%90%88%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="toc-number">6.</span> <span class="toc-text">第六章 集合引用类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-Object"><span class="toc-number">6.1.</span> <span class="toc-text">6.1 Object</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-Array"><span class="toc-number">6.2.</span> <span class="toc-text">6.2 Array</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E5%AE%9A%E5%9E%8B%E6%95%B0%E7%BB%84"><span class="toc-number">6.3.</span> <span class="toc-text">6.3 定型数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-Map"><span class="toc-number">6.4.</span> <span class="toc-text">6.4 Map</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-WeakMap"><span class="toc-number">6.5.</span> <span class="toc-text">6.5 WeakMap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-Set"><span class="toc-number">6.6.</span> <span class="toc-text">6.6 Set</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-7-WeakSet"><span class="toc-number">6.7.</span> <span class="toc-text">6.7 WeakSet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-8-%E8%BF%AD%E4%BB%A3%E4%B8%8E%E6%89%A9%E5%B1%95%E6%93%8D%E4%BD%9C"><span class="toc-number">6.8.</span> <span class="toc-text">6.8 迭代与扩展操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E7%AB%A0-%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%B8%8E%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">7.</span> <span class="toc-text">第七章 迭代器与生成器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">7.1.</span> <span class="toc-text">7.2 迭代器模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">7.2.</span> <span class="toc-text">7.3 生成器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AB%E7%AB%A0-%E5%AF%B9%E8%B1%A1%E3%80%81%E7%B1%BB%E4%B8%8E%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B"><span class="toc-number">8.</span> <span class="toc-text">第八章 对象、类与面向对象编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E7%90%86%E8%A7%A3%E5%AF%B9%E8%B1%A1"><span class="toc-number">8.1.</span> <span class="toc-text">8.1 理解对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1"><span class="toc-number">8.2.</span> <span class="toc-text">8.2 创建对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-%E7%BB%A7%E6%89%BF"><span class="toc-number">8.3.</span> <span class="toc-text">8.3 继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-%E7%B1%BB"><span class="toc-number">8.4.</span> <span class="toc-text">8.4 类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B9%9D%E7%AB%A0-%E4%BB%A3%E7%90%86%E4%B8%8E%E5%8F%8D%E5%B0%84"><span class="toc-number">9.</span> <span class="toc-text">第九章 代理与反射</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-%E4%BB%A3%E7%90%86%E5%9F%BA%E7%A1%80"><span class="toc-number">9.1.</span> <span class="toc-text">9.1 代理基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-%E4%BB%A3%E7%90%86%E6%8D%95%E8%8E%B7%E5%99%A8%E4%B8%8E%E5%8F%8D%E5%B0%84%E6%96%B9%E6%B3%95"><span class="toc-number">9.2.</span> <span class="toc-text">9.2 代理捕获器与反射方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F"><span class="toc-number">9.3.</span> <span class="toc-text">9.3 代理模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E7%AB%A0-%E5%87%BD%E6%95%B0"><span class="toc-number">10.</span> <span class="toc-text">第十章 函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0"><span class="toc-number">10.1.</span> <span class="toc-text">10.1 箭头函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-%E7%90%86%E8%A7%A3%E5%8F%82%E6%95%B0"><span class="toc-number">10.2.</span> <span class="toc-text">10.3 理解参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-5-%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0%E5%80%BC"><span class="toc-number">10.3.</span> <span class="toc-text">10.5 默认参数值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-6-%E5%8F%82%E6%95%B0%E6%89%A9%E5%B1%95%E4%B8%8E%E6%94%B6%E9%9B%86"><span class="toc-number">10.4.</span> <span class="toc-text">10.6 参数扩展与收集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-9-%E5%87%BD%E6%95%B0%E5%86%85%E9%83%A8"><span class="toc-number">10.5.</span> <span class="toc-text">10.9 函数内部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-10-%E5%87%BD%E6%95%B0%E5%B1%9E%E6%80%A7%E4%B8%8E%E6%96%B9%E6%B3%95"><span class="toc-number">10.6.</span> <span class="toc-text">10.10 函数属性与方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-12-%E9%80%92%E5%BD%92"><span class="toc-number">10.7.</span> <span class="toc-text">10.12 递归</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-13-%E5%B0%BE%E8%B0%83%E7%94%A8%E4%BC%98%E5%8C%96"><span class="toc-number">10.8.</span> <span class="toc-text">10.13 尾调用优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-14-%E9%97%AD%E5%8C%85"><span class="toc-number">10.9.</span> <span class="toc-text">10.14 闭包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-16-%E7%A7%81%E6%9C%89%E5%8F%98%E9%87%8F"><span class="toc-number">10.10.</span> <span class="toc-text">10.16 私有变量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0-%E6%9C%9F%E7%BA%A6%E4%B8%8E%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0"><span class="toc-number">11.</span> <span class="toc-text">第十一章 期约与异步函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B"><span class="toc-number">11.1.</span> <span class="toc-text">11.1 异步编程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-Promise%E6%9C%9F%E7%BA%A6"><span class="toc-number">11.2.</span> <span class="toc-text">11.2 Promise期约</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0"><span class="toc-number">11.3.</span> <span class="toc-text">11.3 异步函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%8C%E7%AB%A0-BOM"><span class="toc-number">12.</span> <span class="toc-text">第十二章 BOM</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1-window%E5%AF%B9%E8%B1%A1"><span class="toc-number">12.1.</span> <span class="toc-text">12.1 window对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-location%E5%AF%B9%E8%B1%A1"><span class="toc-number">12.2.</span> <span class="toc-text">12.2 location对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-3-navigator%E5%AF%B9%E8%B1%A1"><span class="toc-number">12.3.</span> <span class="toc-text">12.3 navigator对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-5-history%E5%AF%B9%E8%B1%A1"><span class="toc-number">12.4.</span> <span class="toc-text">12.5 history对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%89%E7%AB%A0-%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%A3%80%E6%B5%8B"><span class="toc-number">13.</span> <span class="toc-text">第十三章 客户端检测</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-%E7%94%A8%E6%88%B7%E4%BB%A3%E7%90%86%E6%A3%80%E6%B5%8B"><span class="toc-number">13.1.</span> <span class="toc-text">13.2 用户代理检测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3-%E8%BD%AF%E4%BB%B6%E4%B8%8E%E7%A1%AC%E4%BB%B6%E6%A3%80%E6%B5%8B"><span class="toc-number">13.2.</span> <span class="toc-text">13.3 软件与硬件检测</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E5%9B%9B%E7%AB%A0-DOM"><span class="toc-number">14.</span> <span class="toc-text">第十四章 DOM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%94%E7%AB%A0-DOM%E6%89%A9%E5%B1%95"><span class="toc-number">15.</span> <span class="toc-text">第十五章 DOM扩展</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-1-Selectors-API"><span class="toc-number">15.1.</span> <span class="toc-text">15.1 Selectors API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-3-HTML5"><span class="toc-number">15.2.</span> <span class="toc-text">15.3 HTML5</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E5%85%AD%E7%AB%A0-DOM2%E5%92%8CDOM3"><span class="toc-number">16.</span> <span class="toc-text">第十六章 DOM2和DOM3</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-%E6%A0%B7%E5%BC%8F"><span class="toc-number">16.1.</span> <span class="toc-text">16.2 样式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%83%E7%AB%A0-%E4%BA%8B%E4%BB%B6"><span class="toc-number">17.</span> <span class="toc-text">第十七章 事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#17-1-%E4%BA%8B%E4%BB%B6%E6%B5%81"><span class="toc-number">17.1.</span> <span class="toc-text">17.1 事件流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-2-%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F"><span class="toc-number">17.2.</span> <span class="toc-text">17.2 事件处理程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-3-%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1"><span class="toc-number">17.3.</span> <span class="toc-text">17.3 事件对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-4-%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B"><span class="toc-number">17.4.</span> <span class="toc-text">17.4 事件类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-5-%E5%86%85%E5%AD%98%E4%B8%8E%E6%80%A7%E8%83%BD"><span class="toc-number">17.5.</span> <span class="toc-text">17.5 内存与性能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-6-%E6%A8%A1%E6%8B%9F%E4%BA%8B%E4%BB%B6"><span class="toc-number">17.6.</span> <span class="toc-text">17.6 模拟事件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E5%85%AB%E7%AB%A0-%E5%8A%A8%E7%94%BB%E4%B8%8ECanvas%E5%9B%BE%E5%BD%A2"><span class="toc-number">18.</span> <span class="toc-text">第十八章 动画与Canvas图形</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#18-1-%E4%BD%BF%E7%94%A8requestAnimationFrame"><span class="toc-number">18.1.</span> <span class="toc-text">18.1 使用requestAnimationFrame</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-2-%E5%9F%BA%E6%9C%AC%E7%9A%84%E7%94%BB%E5%B8%83%E5%8A%9F%E8%83%BD"><span class="toc-number">18.2.</span> <span class="toc-text">18.2 基本的画布功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-3-2D%E7%BB%98%E5%9B%BE%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="toc-number">18.3.</span> <span class="toc-text">18.3 2D绘图上下文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-4-WebGL"><span class="toc-number">18.4.</span> <span class="toc-text">18.4 WebGL</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B9%9D%E7%AB%A0-%E8%A1%A8%E5%8D%95%E8%84%9A%E6%9C%AC"><span class="toc-number">19.</span> <span class="toc-text">第十九章 表单脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#19-1-%E8%A1%A8%E5%8D%95%E5%9F%BA%E7%A1%80"><span class="toc-number">19.1.</span> <span class="toc-text">19.1 表单基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-2-%E6%96%87%E6%9C%AC%E6%A1%86%E7%BC%96%E7%A8%8B"><span class="toc-number">19.2.</span> <span class="toc-text">19.2 文本框编程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E7%AB%A0-JavaScript-API"><span class="toc-number">20.</span> <span class="toc-text">第二十章 JavaScript API</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%B8%80%E7%AB%A0-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E4%B8%8E%E8%B0%83%E8%AF%95"><span class="toc-number">21.</span> <span class="toc-text">第二十一章 错误处理与调试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-2-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-number">21.1.</span> <span class="toc-text">21.2 错误处理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%BA%8C%E7%AB%A0-%E5%A4%84%E7%90%86XML"><span class="toc-number">22.</span> <span class="toc-text">第二十二章 处理XML</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%B8%89%E7%AB%A0-JSON"><span class="toc-number">23.</span> <span class="toc-text">第二十三章 JSON</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#23-1-%E8%AF%AD%E6%B3%95"><span class="toc-number">23.1.</span> <span class="toc-text">23.1 语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-2-%E8%A7%A3%E6%9E%90%E4%B8%8E%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-number">23.2.</span> <span class="toc-text">23.2 解析与序列化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E5%9B%9B%E7%AB%A0-%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E4%B8%8E%E8%BF%9C%E7%A8%8B%E8%B5%84%E6%BA%90"><span class="toc-number">24.</span> <span class="toc-text">第二十四章 网络请求与远程资源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#24-1-XMLHttpRequest%E5%AF%B9%E8%B1%A1"><span class="toc-number">24.1.</span> <span class="toc-text">24.1 XMLHttpRequest对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-3-%E8%B7%A8%E6%BA%90%E8%B5%84%E6%BA%90%E5%85%B1%E4%BA%AB"><span class="toc-number">24.2.</span> <span class="toc-text">24.3 跨源资源共享</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-4-%E6%9B%BF%E4%BB%A3%E6%80%A7%E8%B7%A8%E6%BA%90%E6%8A%80%E6%9C%AF"><span class="toc-number">24.3.</span> <span class="toc-text">24.4 替代性跨源技术</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%BA%94%E7%AB%A0-%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AD%98%E5%82%A8"><span class="toc-number">25.</span> <span class="toc-text">第二十五章 客户端存储</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#25-1-cookie"><span class="toc-number">25.1.</span> <span class="toc-text">25.1 cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-2-Web-Storage"><span class="toc-number">25.2.</span> <span class="toc-text">25.2 Web Storage</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-3-IndexedDB"><span class="toc-number">25.3.</span> <span class="toc-text">25.3 IndexedDB</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E5%85%AD%E7%AB%A0-%E6%A8%A1%E5%9D%97"><span class="toc-number">26.</span> <span class="toc-text">第二十六章 模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#26-1-%E7%90%86%E8%A7%A3%E6%A8%A1%E5%9D%97%E6%A8%A1%E5%BC%8F"><span class="toc-number">26.1.</span> <span class="toc-text">26.1 理解模块模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-4-%E4%BD%BF%E7%94%A8ES6%E6%A8%A1%E5%9D%97"><span class="toc-number">26.2.</span> <span class="toc-text">26.4 使用ES6模块</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%B8%83%E7%AB%A0-%E5%B7%A5%E4%BD%9C%E8%80%85%E7%BA%BF%E7%A8%8B"><span class="toc-number">27.</span> <span class="toc-text">第二十七章 工作者线程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#27-1-%E5%B7%A5%E4%BD%9C%E8%80%85%E7%BA%BF%E7%A8%8B%E7%AE%80%E4%BB%8B"><span class="toc-number">27.1.</span> <span class="toc-text">27.1 工作者线程简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-2-%E4%B8%93%E7%94%A8%E5%B7%A5%E4%BD%9C%E8%80%85%E7%BA%BF%E7%A8%8B"><span class="toc-number">27.2.</span> <span class="toc-text">27.2 专用工作者线程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-5-%E5%B0%8F%E7%BB%93"><span class="toc-number">27.3.</span> <span class="toc-text">27.5 小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E5%85%AB%E7%AB%A0-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-number">28.</span> <span class="toc-text">第二十八章 最佳实践</span></a></li></ol></div></div></div></div></main><footer id="footer" style="background: rgb(105, 105, 105)"><div id="footer-wrap"><div class="copyright">&copy;2022 By 幽蓝</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">The purpose of life is to enjoy every moment🍺</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadLivere () {
  if (typeof LivereTower === 'object') {
    window.LivereTower.init()
  }
  else {
    (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
    })(document, 'script');
  }
}

if ('Livere' === 'Livere' || !false) {
  if (false) btf.loadComment(document.getElementById('lv-container'), loadLivere)
  else loadLivere()
}
else {
  function loadOtherComment () {
    loadLivere()
  }
}</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>